<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>

  <title>Abstracting platform specific code in libgdx &middot; David Saltares</title>

  
  <link rel="stylesheet" href="../../css/poole.css">
  <link rel="stylesheet" href="../../css/hyde.css">
  <link rel="stylesheet" href="../../css/poole-overrides.css">
  <link rel="stylesheet" href="../../css/hyde-overrides.css">
  <link rel="stylesheet" href="../../css/hyde-x.css">
  <link rel="stylesheet" href="../../css/highlight/zenburn.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../touch-icon-144-precomposed.png">
  <link href="../../img/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-4440744-3', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="../../"><img src="../../img/profile.jpg"
             alt="profile-picture" id="profile-img" title="David Saltares"></a>
      <h1><a href="../../">David Saltares</a></h1>
      <p class="lead">Software Development</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="../../">Blog</a></li>
      
      <li class="sidebar-nav-item"><a href="../../about">About</a></li>
      
      <li class="sidebar-nav-item"><a href="../../apps-tools">Apps &amp; Tools</a></li>
      
      <li class="sidebar-nav-item"><a href="../../game-jams">Game Jams</a></li>
      
      <li class="sidebar-nav-item"><a href="../../games">Games</a></li>
      
      <li class="sidebar-nav-item"><a href="../../libgdx-cross-platform-game-development-cookbook">Libgdx Cookbook</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="http://github.com/dsaltares"><i class="fa fa-github-square fa-2x"></i></a>
      
      
      <a href="https://www.linkedin.com/in/davidsaltares"><i class="fa fa-linkedin-square fa-2x"></i></a>
      
      
      <a href="http://twitter.com/d_saltares"><i class="fa fa-twitter-square fa-2x"></i></a>
      <a href="https://www.youtube.com/channel/UCw375yUExJOVIEHmvmPFWyg"><i class="fa fa-youtube-square fa-2x"></i></a>
      <a href="../../index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-2x"></i></a>
      </li>
    </ul>

    

    <div class="copyright">
      <p>
        &copy; 2020 David Saltares.<br/>
        Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X.</a><br/>
        Hosted on <a href="https://pages.github.com/">Github Pages</a>.
      </p>
    </div>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Abstracting platform specific code in libgdx</h1>
    <span class="post-date">Sep 8, 2012 &middot; <a href="https://saltares.com/games/abstracting-platform-specific-code-in-libgdx/#disqus_thread">Comments</a>
    
    <br/>
    <a class="label" href="../../categories/games-development">Games development</a>
    </span>
    <p>One of the main reasons I&quot;m working with <a href="http://libgdx.badlogicgames.com/">libgdx</a> is its multiplatform capabilities. With very little effort you can target desktop (Windows/Linux/Mac), Android and WebGL able browsers. The problem comes with the <em>&ldquo;little&rdquo;</em> in the previous sentence. The developer is supposed to share the code base between all targets but sometimes it&quot;s necessary to provide platform specific behaviour, maybe because a feature is not available in every device or just to adapt the product better to the target. Anyway, how do we achieve that in a fairly elegant fashion?</p>
<h3 id="project-structure">Project structure</h3>
<p>As many of you may already know, a multiplatform libgdx project is often arranged the following way:</p>
<ul>
<li><strong>game</strong>: shared code base</li>
<li><strong>game-desktop</strong>: desktop launcher</li>
<li><strong>game-android</strong>: Android launcher</li>
<li><strong>game-html</strong>: HTML5 launcher</li>
</ul>
<p>Every platform specific project depends on the base one and they all instantiate the main class from there, typically belonging to an <code>ApplicationListener</code> derived class (we shall name it <em>Game</em> from now on). Yes, it is perfectly fine to add platform specific code in the derived projects. However, it would be desirable to handle platform specific behaviour using an homogeneous approach, from our base project.</p>
<h3 id="the-platformresolver-interface">The PlatformResolver interface</h3>
<p>This interface belongs to the shared code base and it contains methods to provide platform specific behaviour depending on our needs. Here there&quot;s just a very basic example but this interface could vary on a per game basis. A good idea would be to implement this class as a <a href="http://en.wikipedia.org/wiki/Facade_pattern">Facade</a> providing access to platform specific subsystems such as input management or Facebook connectivity to mention a couple.</p>
<pre><code>public interface PlatformResolver {
    public String getDefaultLanguage();
    public FacebookAPI getFacebookAPI();
    public InputManager getInputManager();
}
</code></pre><p>Our main game class would hold an instance to a specific <em>PlatformResolver</em> yet to be determined. It&quot;s each platform&quot;s responsibility to tell the game which instance should it use to solve platform specific issues.</p>
<pre><code>public class Game implements ApplicationListener {
    protected static PlatformResolver m_platformResolver = null;

    public static PlatformResolver getPlatformResolver() {
        return m_platformResolver;
    }

    public static void setPlatformResolver(PlatformResolver platformResolver) {
        m_platformResolver = platformResolver;
    }
}
</code></pre><h3 id="platformresolver-in-use">PlatformResolver in use</h3>
<p>In each descendent project we would have something similar to:</p>
<pre><code>public class AndroidResolver implements PlatformResolver {}
public class DesktopResolver implements PlatformResolver {}
public class WebGLResolver implements PlatformResolver {}
</code></pre><p>Like I mentioned before, it&quot;s necessary to tell the <em>Game</em> which platform resolver to use, we do that in every platform&quot;s launcher. The desktop one could serve as a perfectly valid example:</p>
<pre><code>public static void main(String[] args) {
    // Configure platform dependent code
    Game.setPlatformResolver(new DesktopResolver());

    // Launch the game
    new LwjglApplication(new Game(), cfg);
}
</code></pre><p>Later on during execution we could need to determine the system&quot;s default language but that depends on the platform we are working withâ€¦ Fear no more! We can happily ask our <em>PlatformResolver</em>:</p>
<pre><code>String defaultLang = Game.getPlatformResolver().getDefaultLanguage();
</code></pre><h3 id="the-possibilities">The possibilities</h3>
<p>We are currently using this very same approach for <a href="https://github.com/dsaltares/sionengine">SionEngine</a> and it&quot;s proven to be flawless so far. You can abstract virtually any platform specific behaviour using something similar.</p>
<p>Soon there will be more and better on libgdx related stuff! Feel free to criticize and throw rocks at me because of this post.</p>

  </div>
  <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'siondream';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>


<script src="../../js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="../../js/load-photoswipe.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
</body>
</html>

