<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>

  <title>Exploit Tiled&#39;s command tool &middot; David Saltares</title>

  
  <link rel="stylesheet" href="../../css/poole.css">
  <link rel="stylesheet" href="../../css/hyde.css">
  <link rel="stylesheet" href="../../css/poole-overrides.css">
  <link rel="stylesheet" href="../../css/hyde-overrides.css">
  <link rel="stylesheet" href="../../css/hyde-x.css">
  <link rel="stylesheet" href="../../css/highlight/zenburn.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../touch-icon-144-precomposed.png">
  <link href="../../img/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-4440744-3', 'auto');
    ga('send', 'pageview');
  </script>
  

  
  <link rel="canonical" href="https://saltares.com/games/exploit-tileds-command-tool/" itemprop="url" />
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="../../"><img src="../../img/profile.jpg"
             alt="profile-picture" id="profile-img" title="David Saltares"></a>
      <h1><a href="../../">David Saltares</a></h1>
      <p class="lead">Software Development</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="../../">Blog</a></li>
      
      <li class="sidebar-nav-item"><a href="../../about">About</a></li>
      
      <li class="sidebar-nav-item"><a href="../../apps-tools">Apps &amp; Tools</a></li>
      
      <li class="sidebar-nav-item"><a href="../../game-jams">Game Jams</a></li>
      
      <li class="sidebar-nav-item"><a href="../../games">Games</a></li>
      
      <li class="sidebar-nav-item"><a href="../../libgdx-cross-platform-game-development-cookbook">Libgdx Cookbook</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="http://github.com/dsaltares"><i class="fa fa-github-square fa-2x"></i></a>
      
      
      <a href="https://www.linkedin.com/in/davidsaltares"><i class="fa fa-linkedin-square fa-2x"></i></a>
      
      
      <a href="http://twitter.com/d_saltares"><i class="fa fa-twitter-square fa-2x"></i></a>
      <a href="https://www.youtube.com/channel/UCw375yUExJOVIEHmvmPFWyg"><i class="fa fa-youtube-square fa-2x"></i></a>
      <a href="../../index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-2x"></i></a>
      </li>
    </ul>

    

    <div class="copyright">
      <p>
        &copy; 2022 David Saltares.<br/>
        Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X.</a><br/>
        Hosted on <a href="https://pages.github.com/">Github Pages</a>.
      </p>
    </div>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Exploit Tiled&#39;s command tool</h1>
    <span class="post-date">Jun 30, 2013 &middot; 4 minute read &middot; <a href="https://saltares.com/games/exploit-tileds-command-tool/#disqus_thread">Comments</a>
    
    <br/>
    <a class="label" href="../../categories/games-development">Games development</a>
    </span>
    <p><img src="../../img/wp/tiled.png" alt="tiled.png"></p>
<p>Most of my spare time for the last month or so has gone to an Android pet project, which partially explains the lack of activity around here. However, such project gave me a little idea for a short tutorial flavoured article.</p>
<h3 id="level-design-practically-a-synonym-of-iteration">Level design, practically a synonym of iteration</h3>
<p>Everybody knows how essential iteration is for games development. Ideas tend to look awesome on paper, yet most of them perform poorly when implemented. Throwing away whole features and reworking others surely isn&rsquo;t new territory for you. Level designers probably know this better than anyone. Creating a <a href="http://www.youtube.com/watch?v=HNctAEfR97A">greybox level</a> and making hundreds of changes until it flows nicely and artist can know for sure where everything is going to be.</p>
<p>Tools like <a href="http://www.crydev.net/index.php">CryEngine SandBox</a> allow lightning fast iteration by letting the creator jump into game straight from the editor to test setups. The change something and test it cycle flows incredibly nicely and no time is wasted with annoying loading screens.</p>
<p><img src="../../img/wp/CryENGINE-inital-scene.jpg" alt="CryENGINE-inital-scene.jpg"></p>
<h3 id="iteration-can-be-cumbersome">Iteration can be cumbersome</h3>
<p>Nevertheless, I&quot;m using <a href="http://libgdx.badlogicgames.com/">libgdx</a> (check out the new website) along <a href="http://www.mapeditor.org/">Tiled</a> to make this pet project and things are different under this environment. Normally, one would go through the following process:</p>
<ul>
<li>Create a level with Tiled.</li>
<li>Add it to the list of levels in the game. This could involve changed in an XML file or, much worse, fiddling with the source code.</li>
<li>Launch the game and navigate the menus until you find the newly created level.</li>
<li>Finally test it.</li>
<li><em>&ldquo;Oh, I need to move this obstacle a bit to the left&rdquo;</em>.</li>
<li>Back to 1, not before wishing to be stabbed in the face.</li>
</ul>
<p>You might think this is acceptable if a single iteration takes less than half a minute.</p>
<p>Wrong!</p>
<p>You&quot;ll be doing this a ridiculous number of times, so you better do yourself a favor and try shorten the process.</p>
<h3 id="tiled-command-tool-at-your-service">Tiled command tool at your service</h3>
<p>Luckily enough, we can use Tiled to execute any command passing the map file we&quot;re currently editing as a parameter from its main UI panel, it&rsquo;s almost as good as what CryEngine does. It only requires a little effort on our side, as the game needs to accept command line parameters and interpret them, we&quot;ll get to that later.</p>
<p>First, click on the gears icon in Tiled and then select <em>Edit Commands</em>. Create a new one and name it <em>Run level</em> for instance. The command will be executed from the Tiled folder, Program Files in my case. That&rsquo;s why I&quot;m using absolute paths to reach my game&rsquo;s executable.</p>
<pre tabindex="0"><code>java -jar E:projectsmathmazemath.jar %mapfile
</code></pre><p><img src="../../img/wp/tiled-command.png" alt="tiled-command.png"></p>
<p>The <em>%mapfile</em> string is replaced by the absolute path to our level when the command is executed.</p>
<p>Now it&rsquo;s time to make the game accept an absolute path as a parameter and load a specific level when that happens, without going through all the menus. In my case I did something similar to this.</p>
<pre tabindex="0"><code>public class Main {
	public static void main(String[] args) {
		String level =  args.length &gt; 0 ? args[0] : &quot;&quot;;
		new LwjglApplication(new MyGame(level), new LwjglApplicationConfiguration());
	}
}
</code></pre><p>Then, in <em>MyGame</em> create method.</p>
<pre tabindex="0"><code>if (!mapFile.empty() {
	Level level = new Level(mapFile);
	gameScreen.setLevel(level);
	gameScreen.setDebug(true);
	setScreen(gameScreen);
}
else {
	setScreen(splashScreen);	
}
</code></pre><p>Within <em>GameScreen</em> I had to detect whether we were in debug mode and, if so, think of the level as an absolute path.</p>
<pre tabindex="0"><code>if (isDebug()) {
	mapLoader = new TmxMapLoader(new AbsoluteFileHandleResolver());
}
else {
	mapLoader = new TmxMapLoader();
}

TiledMap map = mapLoader.load(getLevel());
</code></pre><p>I noticed that libgdx doesn&rsquo;t include an absolute path file handle resolver, so I created it. Otherwise, it&quot;d think the file path is of the relative kind.</p>
<pre tabindex="0"><code>public class AbsoluteFileHandleResolver implements FileHandleResolver {
	@Override
	public FileHandle resolve(String fileName) {
		return Gdx.files.absolute(fileName);
	}
}
</code></pre><p>The last step was to export the game as a runnable jar to make it accessible from Tiled. After this, we can now finally run our level directly just by clicking on the gears icon. It requires some initial investment but I can assure you it pays off.</p>
<p>Easy as pie and fast!</p>

  </div>
  <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'siondream';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>


<script src="../../js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
<script src="../../js/load-photoswipe.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
</body>
</html>

