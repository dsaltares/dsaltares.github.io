<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/touch-icon-144-precomposed.png"/><title>Smart enums in C++ or: &quot;what is this madness?&quot; · David Saltares</title><meta name="robots" content="index,follow"/><meta name="description" content="Engineering Leadership &amp; Software Development"/><meta property="og:title" content="Smart enums in C++ or: &quot;what is this madness?&quot; · David Saltares"/><meta property="og:description" content="Engineering Leadership &amp; Software Development"/><meta property="og:url" content="https://saltares.com/smart-enums-in-c---or-what-is-this-madness"/><meta property="og:type" content="website"/><link rel="canonical" href="https://saltares.com/smart-enums-in-c---or-what-is-this-madness"/><meta name="keywords" content=""/><meta name="next-head-count" content="12"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/d3d4cc303d9c1080.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/d3d4cc303d9c1080.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-7671224c423a1e1f.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-66d32731bdd20e83.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-41a9ee3ebe735abe.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-75760b031d352622.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/c16184b3-5eed107b4bbcea31.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/2cca2479-0d4bcd71a6a0316a.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/252-2454d8293e83336b.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/167-6fe50976be6d0e53.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/962-ea29c7731d832d32.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/373-f5166c707bca4ed3.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-81b48131ea6e98cc.js" defer="" crossorigin=""></script><script src="/_next/static/GPo9p-v-svP46COtjl3_u/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/GPo9p-v-svP46COtjl3_u/_ssgManifest.js" defer="" crossorigin=""></script><style data-href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap">@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizaRExUiTo99u79P0Y.woff) format('woff')}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizfRExUiTo99u79B_mh4Oo.woff) format('woff')}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizaRExUiTo99u79D0-ExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizaRExUiTo99u79D0aExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizaRExUiTo99u79D0yExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizaRExUiTo99u79D0KExcOPIDU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizfRExUiTo99u79B_mh0OOtLR8a8zILig.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizfRExUiTo99u79B_mh0OqtLR8a8zILig.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizfRExUiTo99u79B_mh0OCtLR8a8zILig.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizfRExUiTo99u79B_mh0O6tLR8a8zI.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="flex flex-col md:flex-row font-sans text-xl w-full"><aside class="md:max-w-[360px] bg-primary px-10 py-10 text-white text-xl md:fixed md:top-0 md:left-0 md:h-full flex flex-col justify-end items-center md:items-start"><div><a href="/"><div class="mb-5"><img alt="profile picture" loading="lazy" width="200" height="200" decoding="async" data-nimg="1" class="rounded-full" style="color:transparent" src="/img/profile.webp"/></div><h1 class="text-white font-bold text-4xl leading-10">David Saltares</h1></a></div><p class="text-contentLight text-2xl mb-5 leading-9 text-center md:text-left">Engineering Leadership &amp; Software Development</p><div class="mb-5 font-base"><button class="ml-onclick-form" onclick="ml('show', '646AL4', true)">✉️ Subscribe</button></div><nav><ul class="mb-5 flex flex-col items-center md:items-start list-none pl-0"><li class="leading-7"><a href="/">Blog</a></li><li class="leading-7"><a href="/about-me/">About</a></li><li class="leading-7"><a href="/apps-tools/">Apps &amp; Tools</a></li><li class="leading-7"><a href="/game-jams/">Game Jams</a></li><li class="leading-7"><a href="/games/">Games</a></li><li class="leading-7"><a href="/libgdx-cross-platform-game-development-cookbook/">Libgdx Cookbook</a></li></ul></nav><ul class="mb-5 list-none pl-0"><li class="inline"><a aria-label="Github profile" href="https://github.com/dsaltares"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="square-github" class="svg-inline--fa fa-square-github text-4xl mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></path></svg></a></li><li class="inline"><a aria-label="Linkedin profile" href="https://www.linkedin.com/in/davidsaltares/"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin text-4xl mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li class="inline"><a aria-label="Twitter profile" href="https://twitter.com/dsaltares"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="square-twitter" class="svg-inline--fa fa-square-twitter text-4xl mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg></a></li><li class="inline"><a aria-label="RSS feed" href="https://saltares.com/index.xml"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="square-rss" class="svg-inline--fa fa-square-rss text-4xl mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM96 136c0-13.3 10.7-24 24-24c137 0 248 111 248 248c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200c-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24c83.9 0 152 68.1 152 152c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104c-13.3 0-24-10.7-24-24zm64 120c0 17.7-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32z"></path></svg></a></li><li class="inline"><a rel="me" href="https://fosstodon.org/@dsaltares"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="mastodon" class="svg-inline--fa fa-mastodon text-4xl mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"></path></svg></a></li></ul><p class="text-contentLight text-lg">© 2024 David Saltares.</p></aside><div class="md:max-w-[360px] w-full hidden md:block flex-grow-0 flex-shrink-0"></div><div class="flex flex-col main-content"><main class="w-full max-w-[720px] pr-4 py-10 pl-5 md:py-20 md:pl-20"><article class="text-content mb-10"><div><a href="/smart-enums-in-c---or-what-is-this-madness/"><h1 class="font-bold text-4xl mb-2 text-primary">Smart enums in C++ or: &quot;what is this madness?&quot;</h1></a><p class="flex text-contentLight mb-1">Feb 9 2014 · 6 min read<span> · </span><a class="text-contentLink" href="/smart-enums-in-c---or-what-is-this-madness/#disqus_thread">Comments</a></p><div class="mb-3"><div class="flex flex-row gap-1"><a class="px-2 py-1 bg-slate-900 text-white rounded font-bold text-sm" href="/categories/computing/">Computing</a></div></div></div><p>Needless to say, <strong>C++ is a glorious language</strong>. Sadly, the attention it gets on the blog is far from representative of my appreciation towards it. Despite it being my main language at work, I only tend to talk about <a class="text-contentLink text-lg" href="/tag/libgdx/">Libgdx</a> side projects around here. Well, enough is enough!</p>
<p>Truth be told, over the years, standard after standard, C++ has become a behemoth of a language. As <a class="text-contentLink text-lg" href="https://www.google.co.uk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;ved=0CC8QFjAA&amp;url=http%3A%2F%2Fwww.amazon.co.uk%2FEffective-Specific-Addison-Wesley-Professional-Computing%2Fdp%2F0201924889&amp;ei=T9X3UoS5Ec7y7AaS5IDQDA&amp;usg=AFQjCNFQ9GOAfduwPXXh4k9gzib3-djOTg&amp;sig2=JutKpkkTKO8YMXdtaGgZmA&amp;bvm=bv.60983673,d.ZGU">Scott Meyers</a> likes to say, it&#x27;s actually a set of languages.</p>
<ul>
<li>C with classes.</li>
<li>C with classes and the STL.</li>
<li>All of the above and templates.</li>
</ul>
<p>One of the beauties of C++ is that I can always learn something new about it, which almost makes up for its ever growing syntax complexity.</p>
<h3>Let&#x27;s talk macros</h3>
<p>Let&#x27;s talk about macros. Everyone knows about the <a class="text-contentLink text-lg" href="www.cplusplus.com/doc/tutorial/preprocessor/">preprocessor</a> and the basic usage of macros, right?</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">PI</span> <span class="token expression"><span class="token number">3.14</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">SQR</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> x <span class="token operator">*</span> x</span></span>
</code></pre></div>
<p>Actually, let&#x27;s talk about macros that take other macros as arguments.</p>
<blockquote>
<p>Sorry what?</p>
</blockquote>
<h3>The problem</h3>
<p>Let us imagine we define the following perfectly standard enum to represent kinds of animals in a farm.</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">enum</span> <span class="token class-name">Animal</span>
<span class="token punctuation">{</span>
    eAnimal_Dog<span class="token punctuation">,</span>
    eAnimal_Cat<span class="token punctuation">,</span>
    eAnimal_Cow<span class="token punctuation">,</span>
    eAnimal_Count<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Our application can request a server a list of animals a given farm has. The server sends the animal names as strings, so we need to convert them to enum values. Alright, let&#x27;s define a function to do that.</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp">Animal <span class="token function">getAnimalFromString</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">strcmp</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">&quot;Dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> eAnimal_Dog<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">strcmp</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">&quot;Cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> eAnimal_Cat<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">strcmp</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">&quot;Cow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> eAnimal_Cow<span class="token punctuation">;</span>
    <span class="token keyword">return</span> eAnimal_Count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Err… That is not the most elegant piece of code you&#x27;ve ever seen, is it? We also might have to convert from an enum value to a string literal in case we want to send a report back to the server.</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">getStringFromAnimal</span><span class="token punctuation">(</span>Animal animal<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>animal<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> eAnimal_Dog<span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;Dog&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> eAnimal_Cat<span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;Cat&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> eAnimal_Cow<span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;Cow&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token string">&quot;None&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>That was horrendous enough, but just the thought of adding new species to the catalogue makes me shiver badly. Why not simply use strings to represent animal species? Enums are nice because they heavily reduce the domain of values a variable can have and prevent us from making silly typos everywhere.</p>
<blockquote>
<p>There must be a better solution.</p>
</blockquote>
<h3>Higher order macros</h3>
<p>To make things nicer, we&#x27;d need some sort of compile time mechanism that traverses the list of enum values generating the time consuming boilerplate code for us.</p>
<blockquote>
<p>The preprocessor!</p>
</blockquote>
<p>Take a look at this way of defining our list of animals.</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">ANIMAL_LIST</span><span class="token expression"><span class="token punctuation">(</span>m<span class="token punctuation">)</span>   </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token function">m</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> Dog<span class="token punctuation">)</span>  </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token function">m</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> Cat<span class="token punctuation">)</span>  </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token function">m</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> Cow<span class="token punctuation">)</span></span></span>
</code></pre></div>
<p><code class="text-code bg-codeBg px-2 py-1 text-sm rounded">_ANIMAL_LIST_</code> is a higher order macro that takes a macro m as a parameter. Then it passes each one of our animal species to m.</p>
<p>The previous macro is not really useful by itself. Let&#x27;s make things slightly more interesting</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">SMARTENUM_VALUE</span><span class="token expression"><span class="token punctuation">(</span>typeName<span class="token punctuation">,</span> value<span class="token punctuation">)</span> e</span><span class="token punctuation">##</span><span class="token expression">typeName</span><span class="token punctuation">##</span><span class="token expression">_</span><span class="token punctuation">##</span><span class="token expression">value<span class="token punctuation">,</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">SMARTENUM_DEFINE_ENUM</span><span class="token expression"><span class="token punctuation">(</span>typeName<span class="token punctuation">,</span> values<span class="token punctuation">)</span> <span class="token keyword">enum</span> <span class="token class-name">typeName</span> <span class="token punctuation">{</span> <span class="token function">values</span><span class="token punctuation">(</span>SMARTENUM_VALUE<span class="token punctuation">)</span> e</span><span class="token punctuation">##</span><span class="token expression">typeName</span><span class="token punctuation">##</span><span class="token expression">_Count<span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span></span>
</code></pre></div>
<p><code class="text-code bg-codeBg px-2 py-1 text-sm rounded">SMARTENUM_DEFINE_ENUM</code> takes the enum name and the list of values as parameters and defines an enum for us. It also appends the total count.</p>
<p><strong>Note</strong>: ## is used by the preprocessor to concatenate parameters with other pieces of text.</p>
<p>When we write</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token function">SMARTENUM_DEFINE_ENUM</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> ANIMAL_LIST<span class="token punctuation">)</span>
</code></pre></div>
<p>The preprocessor expands it to</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">enum</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>eAnimal_Dog<span class="token punctuation">,</span> eAnimal_Cat<span class="token punctuation">,</span> eAnimal_Cow<span class="token punctuation">,</span> eAnimal_Count<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Okay, that was a lot of gibber jabber for very little gain.</p>
<p>Hang on a minute, we can go further. Let&#x27;s write a small mechanism to convert an enum value to a string literal.</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">SMARTENUM_STRING</span><span class="token expression"><span class="token punctuation">(</span>typeName<span class="token punctuation">,</span> value<span class="token punctuation">)</span> #value<span class="token punctuation">,</span> #define</span></span>
<span class="token function">SMARTENUM_DEFINE_NAMES</span><span class="token punctuation">(</span>typeName<span class="token punctuation">,</span> values<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> typeName##Array <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token punctuation">{</span><span class="token char">&#x27; &#x27;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token function">values</span><span class="token punctuation">(</span>SMARTENUM_STRING<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span> #define <span class="token function">getStringFromEnumValue</span><span class="token punctuation">(</span>typeName<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
typeName##Array<span class="token punctuation">[</span>##value<span class="token punctuation">]</span>
</code></pre></div>
<p><code class="text-code bg-codeBg px-2 py-1 text-sm rounded">SMARTENUM_DEFINE_NAMES</code> takes an enum type and the list of values and generates an array with the string representations of our list values. Interestingly enough, the values in the array map directly to those of the enum. This allows us to write the third macro, which accesses the array at the right position to return the corresponding string literal for a given enum value.</p>
<p><strong>Note</strong>: # is used by the preprocessor to convert a piece of
text in a string literal.</p>
<p>When we write</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token function">SMARTENUM_DEFINE_NAMES</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> ANIMAL_LIST<span class="token punctuation">)</span>
</code></pre></div>
<p>The preprocessor expands it to</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> AnimalArray <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token char">&#x27;Dog&#x27;</span><span class="token punctuation">,</span> <span class="token char">&#x27;Cat&#x27;</span><span class="token punctuation">,</span> <span class="token char">&#x27;Cow&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div>
<p>So</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> animalName <span class="token operator">=</span> <span class="token function">getStringFromEnumValue</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> eAnimal_Cow<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Will result in</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> animalName <span class="token operator">=</span> <span class="token string">&quot;Cow&quot;</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Aha!</p>
<p>Getting an enum value from a string literal is slightly trickier but still achievable. We&#x27;ve come this far, so it&#x27;d be a shame not to finish the job.</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">SMARTENUM_DEFINE_GET_VALUE_FROM_STRING</span><span class="token expression"><span class="token punctuation">(</span>typeName<span class="token punctuation">,</span> name<span class="token punctuation">)</span>       </span><span class="token punctuation">\</span>
    <span class="token expression">typeName get</span><span class="token punctuation">##</span><span class="token expression">typeName</span><span class="token punctuation">##</span><span class="token expression"><span class="token function">FromString</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>     </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token punctuation">{</span>                               </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span> e</span><span class="token punctuation">##</span><span class="token expression">typeName</span><span class="token punctuation">##</span><span class="token expression">_Count<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    </span><span class="token punctuation">\</span>
            <span class="token expression"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">strcmp</span><span class="token punctuation">(</span></span><span class="token punctuation">##</span><span class="token expression">typeName</span><span class="token punctuation">##</span><span class="token expression">Array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">)</span>     </span><span class="token punctuation">\</span>
                <span class="token expression"><span class="token keyword">return</span> <span class="token punctuation">(</span></span><span class="token punctuation">##</span><span class="token expression">typeName</span><span class="token punctuation">##</span><span class="token expression"><span class="token punctuation">)</span>i<span class="token punctuation">;</span>         </span><span class="token punctuation">\</span>
        <span class="token expression"><span class="token keyword">return</span> e</span><span class="token punctuation">##</span><span class="token expression">typeName</span><span class="token punctuation">##</span><span class="token expression">_Count<span class="token punctuation">;</span>             </span><span class="token punctuation">\</span>
    <span class="token expression"><span class="token punctuation">}</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">getEnumValueFromString</span><span class="token expression"><span class="token punctuation">(</span>typeName<span class="token punctuation">,</span> name<span class="token punctuation">)</span>  get</span><span class="token punctuation">##</span><span class="token expression">typeName</span><span class="token punctuation">##</span><span class="token expression"><span class="token function">FromString</span><span class="token punctuation">(</span></span><span class="token punctuation">##</span><span class="token expression">name<span class="token punctuation">)</span></span></span>
</code></pre></div>
<p>The first abomination generates a function that iterates over the previously defined array of names doing string comparisons until it finds the desired enum value. The second one is nothing more than a convenience macro to spare the user from remembering the preprocessor generated function name.</p>
<p>Now if we do</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token function">SMARTENUM_DEFINE_GET_VALUE_FROM_STRING</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> ANIMAL_LIST<span class="token punctuation">)</span>
</code></pre></div>
<p>We can simply go</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp">Animal animal <span class="token operator">=</span> <span class="token function">getEnumValueFromString</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> animalname<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Neat, isn&#x27;t it?</p>
<h3>For future references</h3>
<p>Now, every time we want to define an enum type that we need to convert to and from strings we&#x27;ll be lucky to be able to do the following.</p>
<div class="remark-highlight"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">CAR_LIST</span><span class="token expression"><span class="token punctuation">(</span>m<span class="token punctuation">)</span> \ <span class="token function">m</span><span class="token punctuation">(</span>Car<span class="token punctuation">,</span> Fiat<span class="token punctuation">)</span> \ <span class="token function">m</span><span class="token punctuation">(</span>Car<span class="token punctuation">,</span> Ford<span class="token punctuation">)</span> \ <span class="token function">m</span><span class="token punctuation">(</span>Car<span class="token punctuation">,</span> Audi<span class="token punctuation">)</span></span></span>
  <span class="token function">SMARTENUM_DEFINE_ENUM</span><span class="token punctuation">(</span>Car<span class="token punctuation">,</span> CAR_LIST<span class="token punctuation">)</span> <span class="token function">SMARTENUM_DEFINE_NAMES</span><span class="token punctuation">(</span>Car<span class="token punctuation">,</span> CAR_LIST<span class="token punctuation">)</span>
  <span class="token function">SMARTENUM_DEFINE_GET_VALUE_FROM_STRING</span><span class="token punctuation">(</span>Car<span class="token punctuation">,</span> CAR_LIST<span class="token punctuation">)</span>
</code></pre></div>
<p>Voilà!</p>
<p>Admittedly, using macros like this doesn&#x27;t make for readable code and sometimes results in debugging complications. However, I&#x27;ve been able to debug my code normally in Visual Studio 2012 when using similar macros.</p>
<p>String conversion of enums is just the tip of the iceberg, this approach can be used to generate all sorts of repetitive boilerplate code.</p>
<h3>Download it</h3>
<p>In case you are interested, <a class="text-contentLink text-lg" href="https://gist.github.com/dsaltares/8904478">SmartEnums.h</a> is available as a GitHub gist.</p>
<p><strong>Note</strong>: this post was inspired by the article <a class="text-contentLink text-lg" href="http://journal.stuffwithstuff.com/2012/01/24/higher-order-macros-in-c/">Higher Order Macros in C++</a></p></article></main></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"metadata":{"path":"content/post/2014-02-09-smart-enums-in-c-or-what-is-this-madness.mdx","title":"Smart enums in C++ or: \"what is this madness?\"","date":"2014-02-09T20:45:57.000Z","categories":["Computing"],"series":null,"description":null,"slug":"smart-enums-in-c---or-what-is-this-madness","readingTime":"6 min read","draft":false,"disableComments":false,"keywords":[],"banner":null},"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    strong: \"strong\",\n    a: \"a\",\n    ul: \"ul\",\n    li: \"li\",\n    h3: \"h3\",\n    div: \"div\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    blockquote: \"blockquote\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"Needless to say, \", _jsx(_components.strong, {\n        children: \"C++ is a glorious language\"\n      }), \". Sadly, the attention it gets on the blog is far from representative of my appreciation towards it. Despite it being my main language at work, I only tend to talk about \", _jsx(_components.a, {\n        href: \"/tag/libgdx/\",\n        children: \"Libgdx\"\n      }), \" side projects around here. Well, enough is enough!\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Truth be told, over the years, standard after standard, C++ has become a behemoth of a language. As \", _jsx(_components.a, {\n        href: \"https://www.google.co.uk/url?sa=t\u0026rct=j\u0026q=\u0026esrc=s\u0026source=web\u0026cd=1\u0026cad=rja\u0026ved=0CC8QFjAA\u0026url=http%3A%2F%2Fwww.amazon.co.uk%2FEffective-Specific-Addison-Wesley-Professional-Computing%2Fdp%2F0201924889\u0026ei=T9X3UoS5Ec7y7AaS5IDQDA\u0026usg=AFQjCNFQ9GOAfduwPXXh4k9gzib3-djOTg\u0026sig2=JutKpkkTKO8YMXdtaGgZmA\u0026bvm=bv.60983673,d.ZGU\",\n        children: \"Scott Meyers\"\n      }), \" likes to say, it's actually a set of languages.\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"C with classes.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"C with classes and the STL.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"All of the above and templates.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"One of the beauties of C++ is that I can always learn something new about it, which almost makes up for its ever growing syntax complexity.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Let's talk macros\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Let's talk about macros. Everyone knows about the \", _jsx(_components.a, {\n        href: \"www.cplusplus.com/doc/tutorial/preprocessor/\",\n        children: \"preprocessor\"\n      }), \" and the basic usage of macros, right?\"]\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsxs(_components.span, {\n            className: \"token macro property\",\n            children: [_jsx(_components.span, {\n              className: \"token directive-hash\",\n              children: \"#\"\n            }), _jsx(_components.span, {\n              className: \"token directive keyword\",\n              children: \"define\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token macro-name\",\n              children: \"PI\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token expression\",\n              children: _jsx(_components.span, {\n                className: \"token number\",\n                children: \"3.14\"\n              })\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"token macro property\",\n            children: [_jsx(_components.span, {\n              className: \"token directive-hash\",\n              children: \"#\"\n            }), _jsx(_components.span, {\n              className: \"token directive keyword\",\n              children: \"define\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token macro-name function\",\n              children: \"SQR\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"x\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" x \", _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"*\"\n              }), \" x\"]\n            })]\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Actually, let's talk about macros that take other macros as arguments.\"\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"Sorry what?\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"The problem\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Let us imagine we define the following perfectly standard enum to represent kinds of animals in a farm.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"enum\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Animal\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n    eAnimal_Dog\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n    eAnimal_Cat\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n    eAnimal_Cow\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n    eAnimal_Count\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Our application can request a server a list of animals a given farm has. The server sends the animal names as strings, so we need to convert them to enum values. Alright, let's define a function to do that.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [\"Animal \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getAnimalFromString\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"char\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"*\"\n          }), \" str\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"strcmp\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"str\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"Dog\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" eAnimal_Dog\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"strcmp\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"str\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"Cat\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" eAnimal_Cat\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"strcmp\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"str\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"Cow\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" eAnimal_Cow\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" eAnimal_Count\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Err… That is not the most elegant piece of code you've ever seen, is it? We also might have to convert from an enum value to a string literal in case we want to send a report back to the server.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"char\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"*\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getStringFromAnimal\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"Animal animal\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"switch\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"animal\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"case\"\n          }), \" eAnimal_Dog\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"Dog\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"case\"\n          }), \" eAnimal_Cat\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"Cat\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"case\"\n          }), \" eAnimal_Cow\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"Cow\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"default\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"None\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"That was horrendous enough, but just the thought of adding new species to the catalogue makes me shiver badly. Why not simply use strings to represent animal species? Enums are nice because they heavily reduce the domain of values a variable can have and prevent us from making silly typos everywhere.\"\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"There must be a better solution.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Higher order macros\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To make things nicer, we'd need some sort of compile time mechanism that traverses the list of enum values generating the time consuming boilerplate code for us.\"\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"The preprocessor!\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Take a look at this way of defining our list of animals.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsxs(_components.span, {\n            className: \"token macro property\",\n            children: [_jsx(_components.span, {\n              className: \"token directive-hash\",\n              children: \"#\"\n            }), _jsx(_components.span, {\n              className: \"token directive keyword\",\n              children: \"define\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token macro-name function\",\n              children: \"ANIMAL_LIST\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"m\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \"   \"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\\\\\"\n            }), \"\\n    \", _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token function\",\n                children: \"m\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"Animal\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" Dog\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \"  \"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\\\\\"\n            }), \"\\n    \", _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token function\",\n                children: \"m\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"Animal\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" Cat\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \"  \"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\\\\\"\n            }), \"\\n    \", _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token function\",\n                children: \"m\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"Animal\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" Cow\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              })]\n            })]\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"_ANIMAL_LIST_\"\n      }), \" is a higher order macro that takes a macro m as a parameter. Then it passes each one of our animal species to m.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The previous macro is not really useful by itself. Let's make things slightly more interesting\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsxs(_components.span, {\n            className: \"token macro property\",\n            children: [_jsx(_components.span, {\n              className: \"token directive-hash\",\n              children: \"#\"\n            }), _jsx(_components.span, {\n              className: \"token directive keyword\",\n              children: \"define\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token macro-name function\",\n              children: \"SMARTENUM_VALUE\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"typeName\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" value\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" e\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsx(_components.span, {\n              className: \"token expression\",\n              children: \"typeName\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsx(_components.span, {\n              className: \"token expression\",\n              children: \"_\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [\"value\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              })]\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            className: \"token macro property\",\n            children: [_jsx(_components.span, {\n              className: \"token directive-hash\",\n              children: \"#\"\n            }), _jsx(_components.span, {\n              className: \"token directive keyword\",\n              children: \"define\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token macro-name function\",\n              children: \"SMARTENUM_DEFINE_ENUM\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"typeName\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" values\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"enum\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"typeName\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"{\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token function\",\n                children: \"values\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"SMARTENUM_VALUE\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" e\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsx(_components.span, {\n              className: \"token expression\",\n              children: \"typeName\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [\"_Count\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"}\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \";\"\n              })]\n            })]\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"SMARTENUM_DEFINE_ENUM\"\n      }), \" takes the enum name and the list of values as parameters and defines an enum for us. It also appends the total count.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Note\"\n      }), \": ## is used by the preprocessor to concatenate parameters with other pieces of text.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"When we write\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsx(_components.span, {\n            className: \"token function\",\n            children: \"SMARTENUM_DEFINE_ENUM\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"Animal\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" ANIMAL_LIST\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The preprocessor expands it to\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"enum\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Animal\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"eAnimal_Dog\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" eAnimal_Cat\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" eAnimal_Cow\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" eAnimal_Count\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Okay, that was a lot of gibber jabber for very little gain.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Hang on a minute, we can go further. Let's write a small mechanism to convert an enum value to a string literal.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsxs(_components.span, {\n            className: \"token macro property\",\n            children: [_jsx(_components.span, {\n              className: \"token directive-hash\",\n              children: \"#\"\n            }), _jsx(_components.span, {\n              className: \"token directive keyword\",\n              children: \"define\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token macro-name function\",\n              children: \"SMARTENUM_STRING\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"typeName\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" value\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" #value\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" #define\"]\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"SMARTENUM_DEFINE_NAMES\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"typeName\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" values\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"char\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"*\"\n          }), \" typeName##Array \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token char\",\n            children: \"' '\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"values\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"SMARTENUM_STRING\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \" #define \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getStringFromEnumValue\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"typeName\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" value\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\ntypeName##Array\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"##value\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"SMARTENUM_DEFINE_NAMES\"\n      }), \" takes an enum type and the list of values and generates an array with the string representations of our list values. Interestingly enough, the values in the array map directly to those of the enum. This allows us to write the third macro, which accesses the array at the right position to return the corresponding string literal for a given enum value.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Note\"\n      }), \": # is used by the preprocessor to convert a piece of\\ntext in a string literal.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"When we write\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsx(_components.span, {\n            className: \"token function\",\n            children: \"SMARTENUM_DEFINE_NAMES\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"Animal\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" ANIMAL_LIST\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The preprocessor expands it to\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"char\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"*\"\n          }), \" AnimalArray \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token char\",\n            children: \"'Dog'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token char\",\n            children: \"'Cat'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token char\",\n            children: \"'Cow'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"So\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"char\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"*\"\n          }), \" animalName \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getStringFromEnumValue\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"Animal\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" eAnimal_Cow\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Will result in\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"char\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"*\"\n          }), \" animalName \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"Cow\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Aha!\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Getting an enum value from a string literal is slightly trickier but still achievable. We've come this far, so it'd be a shame not to finish the job.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsxs(_components.span, {\n            className: \"token macro property\",\n            children: [_jsx(_components.span, {\n              className: \"token directive-hash\",\n              children: \"#\"\n            }), _jsx(_components.span, {\n              className: \"token directive keyword\",\n              children: \"define\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token macro-name function\",\n              children: \"SMARTENUM_DEFINE_GET_VALUE_FROM_STRING\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"typeName\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" name\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \"       \"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\\\\\"\n            }), \"\\n    \", _jsx(_components.span, {\n              className: \"token expression\",\n              children: \"typeName get\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsx(_components.span, {\n              className: \"token expression\",\n              children: \"typeName\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token function\",\n                children: \"FromString\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), _jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"const\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"char\"\n              }), _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"*\"\n              }), \" str\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \"     \"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\\\\\"\n            }), \"\\n    \", _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"{\"\n              }), \"                               \"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\\\\\"\n            }), \"\\n        \", _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"for\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), _jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"int\"\n              }), \" i \", _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"=\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token number\",\n                children: \"0\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \";\"\n              }), \" i \", _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"\u0026\"\n              }), \"lt\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \";\"\n              }), \" e\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsx(_components.span, {\n              className: \"token expression\",\n              children: \"typeName\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [\"_Count\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \";\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"++\"\n              }), \"i\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \"    \"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\\\\\"\n            }), \"\\n            \", _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"if\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"!\"\n              }), _jsx(_components.span, {\n                className: \"token function\",\n                children: \"strcmp\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              })]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsx(_components.span, {\n              className: \"token expression\",\n              children: \"typeName\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [\"Array\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"[\"\n              }), \"i\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"]\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" str\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \"     \"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\\\\\"\n            }), \"\\n                \", _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"return\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              })]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsx(_components.span, {\n              className: \"token expression\",\n              children: \"typeName\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \"i\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \";\"\n              }), \"         \"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\\\\\"\n            }), \"\\n        \", _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"return\"\n              }), \" e\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsx(_components.span, {\n              className: \"token expression\",\n              children: \"typeName\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [\"_Count\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \";\"\n              }), \"             \"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\\\\\"\n            }), \"\\n    \", _jsx(_components.span, {\n              className: \"token expression\",\n              children: _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"}\"\n              })\n            })]\n          }), \"\\n\\n\", _jsxs(_components.span, {\n            className: \"token macro property\",\n            children: [_jsx(_components.span, {\n              className: \"token directive-hash\",\n              children: \"#\"\n            }), _jsx(_components.span, {\n              className: \"token directive keyword\",\n              children: \"define\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token macro-name function\",\n              children: \"getEnumValueFromString\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"typeName\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" name\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \"  get\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsx(_components.span, {\n              className: \"token expression\",\n              children: \"typeName\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token function\",\n                children: \"FromString\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              })]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"##\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [\"name\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              })]\n            })]\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The first abomination generates a function that iterates over the previously defined array of names doing string comparisons until it finds the desired enum value. The second one is nothing more than a convenience macro to spare the user from remembering the preprocessor generated function name.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Now if we do\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsx(_components.span, {\n            className: \"token function\",\n            children: \"SMARTENUM_DEFINE_GET_VALUE_FROM_STRING\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"Animal\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" ANIMAL_LIST\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We can simply go\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [\"Animal animal \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getEnumValueFromString\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"Animal\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" animalname\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Neat, isn't it?\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"For future references\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Now, every time we want to define an enum type that we need to convert to and from strings we'll be lucky to be able to do the following.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-cpp\",\n        children: _jsxs(_components.code, {\n          className: \"language-cpp\",\n          children: [_jsxs(_components.span, {\n            className: \"token macro property\",\n            children: [_jsx(_components.span, {\n              className: \"token directive-hash\",\n              children: \"#\"\n            }), _jsx(_components.span, {\n              className: \"token directive keyword\",\n              children: \"define\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token macro-name function\",\n              children: \"CAR_LIST\"\n            }), _jsxs(_components.span, {\n              className: \"token expression\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"m\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" \\\\ \", _jsx(_components.span, {\n                className: \"token function\",\n                children: \"m\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"Car\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" Fiat\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" \\\\ \", _jsx(_components.span, {\n                className: \"token function\",\n                children: \"m\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"Car\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" Ford\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" \\\\ \", _jsx(_components.span, {\n                className: \"token function\",\n                children: \"m\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"Car\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" Audi\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              })]\n            })]\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"SMARTENUM_DEFINE_ENUM\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"Car\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" CAR_LIST\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"SMARTENUM_DEFINE_NAMES\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"Car\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" CAR_LIST\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"SMARTENUM_DEFINE_GET_VALUE_FROM_STRING\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"Car\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" CAR_LIST\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Voilà!\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Admittedly, using macros like this doesn't make for readable code and sometimes results in debugging complications. However, I've been able to debug my code normally in Visual Studio 2012 when using similar macros.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"String conversion of enums is just the tip of the iceberg, this approach can be used to generate all sorts of repetitive boilerplate code.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Download it\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In case you are interested, \", _jsx(_components.a, {\n        href: \"https://gist.github.com/dsaltares/8904478\",\n        children: \"SmartEnums.h\"\n      }), \" is available as a GitHub gist.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Note\"\n      }), \": this post was inspired by the article \", _jsx(_components.a, {\n        href: \"http://journal.stuffwithstuff.com/2012/01/24/higher-order-macros-in-c/\",\n        children: \"Higher Order Macros in C++\"\n      })]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","scope":{}},"series":null},"__N_SSG":true},"page":"/[slug]","query":{"slug":"smart-enums-in-c---or-what-is-this-madness"},"buildId":"GPo9p-v-svP46COtjl3_u","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>