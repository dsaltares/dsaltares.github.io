{"pageProps":{"metadata":{"path":"content/post/2022-04-21-plot-tech-stack-2022.mdx","title":"Behind the scenes of Plot's Learning Design Platform","date":"2022-04-21T00:00:00.000Z","categories":["Leadership","Development"],"series":null,"description":"The Engineering team at Plot had to deliver a prototype of our technology product and lay the foundations for the future in under 3 months. Take a look at the technology choices we made to build high quality web applications in 2022.","slug":"behind-the-scenes-of-plots-learning-design-platform","readingTime":"7 min read","draft":false,"disableComments":false,"keywords":["Typescript","technology strategy","Next.js","full-stack","Prisma","PostgreSQL","Vercel","AWS","Terraform","TailwindCSS","HeadlessUI","NextAuth.js","React Query","remirror","Prosemirror","Github Actions","CI","CD"]},"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    img: \"img\",\n    p: \"p\",\n    a: \"a\",\n    h3: \"h3\",\n    ul: \"ul\",\n    li: \"li\",\n    h2: \"h2\",\n    em: \"em\",\n    code: \"code\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.img, {\n      src: \"/img/plot/plot-logo.png\",\n      alt: \"Plot logo\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"At \", _jsx(_components.a, {\n        href: \"https://www.plot.co/\",\n        children: \"Plot\"\n      }), \", we're building a Learning Design Platform that enables companies to rapidly scale the design of high-quality learning experiences by helping learning designers to make better design decisions faster.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"It took our small team about three months to create a prototype of the platform. As with all early-stage startups, we did this in an environment of high uncertainty, making some technology choices a bit tricky. That's where our guiding principles come in - our principles are what enable us to make the best decisions for our customers and our business even when faced with great uncertainty.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"üôå Our Principles\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Right at the beginning, we set the following principles to help everyone on the team make technology decisions that supported our goals and ensured we were progressing in the same direction.\\nWe agreed that we would:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Spend close to 100% of our time building the actual product\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Create short feedback loops to ensure quality and velocity\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Push complexity as much into the future as possible\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Fall into the \", _jsx(_components.a, {\n          href: \"https://blog.codinghorror.com/falling-into-the-pit-of-success/\",\n          children: \"Pit of Success\"\n        }), \".\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Prioritize User Experience (UX) and Developer Experience (DX)\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"‚öôÔ∏è The Stack\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Let's dive into the stack that laid the foundations of our technology platform.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"‚å®Ô∏è Typescript\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We write all our code in \", _jsx(_components.a, {\n        href: \"https://www.typescriptlang.org/\",\n        children: \"Typescript\"\n      }), \", with no Javascript allowed. We made this choice for a few reasons. They were:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"The team was already familiar with both languages, so there was no steep learning curve.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"The DX the tooling gave us was world-class.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"We caught a lot of silly type-related bugs early which saved time.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Using the same language across the stack simplified the toolchain.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Additionally, the Javascript/Node.js/Typescript ecosystem is \", _jsx(_components.a, {\n        href: \"https://insights.stackoverflow.com/survey/2021#technology-most-popular-technologies\",\n        children: \"incredibly popular\"\n      }), \" and Typescript is one of the \", _jsx(_components.a, {\n        href: \"https://insights.stackoverflow.com/survey/2021#technology-most-loved-dreaded-and-wanted\",\n        children: \"most loved technologies\"\n      }), \", according to the Stack Overflow Developer survey 2021. So, finding answers to problems was a breeze!\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"üèóÔ∏è Infrastructure as Code\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We use \", _jsx(_components.a, {\n        href: \"https://www.terraform.io/\",\n        children: \"Terraform\"\n      }), \" to declare our infrastructure components. That way, our environments are easily reproducible; we can spin them up in a matter of minutes. Additionally, all infrastructure changes go through the same peer-review and CI/CD pipeline as the rest of the system.\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/plot/terraform-plan.png\",\n      alt: \"Terraform plan\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"üöÄ Next.js - The Full-stack Framework\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://nextjs.org/\",\n        children: \"Next.js\"\n      }), \" is \", _jsx(_components.em, {\n        children: \"the\"\n      }), \" full-stack framework for React applications. Having an opinionated framework that takes care of routing and API endpoints, which fits very well with Typescript and does server-side rendering, and has great DX allows us to focus on actually building the application. Not having to worry about configuring Webpack is liberating.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The entire team had plenty of experience with React, so adopting Next.js was a straightforward step.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://remix.run/\",\n        children: \"Remix\"\n      }), \" became generally available shortly after we started and it seems spectacular. However, we're pretty happy with Next.js still. Next.js is battle-tested, mature, and has a very active community.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"üöõ Storage\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For our persistent data layer, we chose \", _jsx(_components.a, {\n        href: \"https://www.prisma.io/\",\n        children: \"Prisma\"\n      }), \" with \", _jsx(_components.a, {\n        href: \"https://www.postgresql.org/\",\n        children: \"PostgreSQL\"\n      }), \". Prisma is an outstanding tool that helped us move much faster. We enjoyed the hassle-free migrations, but we were blown away by the type safety and the autocomplete for writing queries.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We knew our data was going to be mostly relational. That is why we chose PostgreSQL over \", _jsx(_components.a, {\n        href: \"https://www.mongodb.com/\",\n        children: \"MongoDb\"\n      }), \". Thanks to its JSON support, PostgreSQL is versatile and it would adapt well to document-like records if ever needed. PostgreSQL is 99.9% likely to meet our needs!\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Using \", _jsx(_components.a, {\n        href: \"https://docs.docker.com/compose/\",\n        children: \"Docker Compose\"\n      }), \", we ran a persistent database for local development and a non-persistent one for integration tests using Docker Compose.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"üåç Other App-side Technologies\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We implemented our own design system using \", _jsx(_components.a, {\n        href: \"https://tailwindcss.com/\",\n        children: \"TailwindCSS\"\n      }), \" and \", _jsx(_components.a, {\n        href: \"https://headlessui.dev/\",\n        children: \"HeadlessUI\"\n      }), \". TailwindCSS gave us best-in-class DX with complete freedom to make our application look neat and consistent without being too similar to \", _jsx(_components.a, {\n        href: \"https://v4.mui.com/\",\n        children: \"Material-UI\"\n      }), \". Once we became proficient with it, translating wireframes to components and screens came naturally. HeadlessUI was a ‚ÄúPit of Success‚Äù for our app to be accessible.\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/plot/plot-stories.png\",\n      alt: \"Plot storybook\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://react-query.tanstack.com/\",\n        children: \"React Query\"\n      }), \" helps us manage our server-side state on the client. We get cache invalidation, retries, online/offline management, request cancellation, pagination, and more with no effort at all.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Plot users need to be able to collect documentation in a rich and structured way. So, we needed to provide a rich text editor, but creating a great text editing experience on the web that works well across devices is a brutal challenge. I speak \", _jsx(_components.a, {\n        href: \"https://portal.aula.education/c/59-better-faster-more-accessible-aula-editor\",\n        children: \"from experience\"\n      }), \"! That is precisely why we chose \", _jsx(_components.a, {\n        href: \"https://remirror.io/\",\n        children: \"remirror\"\n      }), \", an open-source, off-the-shelf editor for React based on \", _jsx(_components.a, {\n        href: \"https://prosemirror.net/\",\n        children: \"Prosemirror\"\n      }), \". With remirror, the team had the whole, bug-free, rich text editing experience working in our app in under a week.\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/plot/remirror-editor.png\",\n      alt: \"Plot editor\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Authentication is probably one of the most critical parts of any application. It is one of the first flows users experience and a typical attack vector. We could have chosen an authentication-as-a-service provider, like \", _jsx(_components.a, {\n        href: \"https://auth0.com/\",\n        children: \"Auth0\"\n      }), \", but we decided to go with \", _jsx(_components.a, {\n        href: \"https://next-auth.js.org/\",\n        children: \"NextAuth.js\"\n      }), \". It was tremendously simple to set up and lets us heavily customize the experience. Plus, we're able to keep all of the data.\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/plot/plot-auth.png\",\n      alt: \"Plot login screen\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"‚òÅÔ∏è Cloud Hosting\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The core of the Plot LXD platform lives inside the Next.js application, which we deploy to \", _jsx(_components.a, {\n        href: \"https://vercel.com/\",\n        children: \"Vercel\"\n      }), \". The automated preview and production deployments with zero configuration have been an incredible productivity boost; much better than setting up the infrastructure ourselves.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We use AWS (managed by Terraform) for the infrastructure pieces we need and which are not provided by Vercel: VPCs, RDS, SES, S3, etc.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"üìà User Analytics\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We knew we did not have the capacity to build and maintain a proprietary data pipeline. So, we chose \", _jsx(_components.a, {\n        href: \"https://amplitude.com/\",\n        children: \"Amplitude\"\n      }), \" as our data analytics platform for a few reasons:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Generous ‚Äúfree‚Äù tier\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Easy to integrate with a Next.js app\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Ease of use (it allows anyone in the company to obtain insights from available data)\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"üö¢ CI/CD\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"All our code lives in a monorepo (via \", _jsx(_components.a, {\n        href: \"https://classic.yarnpkg.com/lang/en/docs/workspaces/\",\n        children: \"yarn workspaces\"\n      }), \") hosted in Github. We also leverage Github issues and actions CI/CD for a more straightforward setup.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"A workflow kicks off when a PR is open that runs linting, unit/integration tests, and a preview deployment. Everything happens in parallel and takes less than 3 minutes.\"\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/plot/app-preview.png\",\n      alt: \"Plot deploy workflow\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Another workflow starts when a PR is merged to main. It deploys the application to production after all other checks have passed. Every change goes \", _jsx(_components.a, {\n        href: \"https://charity.wtf/2021/02/19/how-much-is-your-fear-costing-you/\",\n        children: \"from main to production in under 5 minutes\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Our continuous delivery culture of fast & frequent deployments coupled with feature flags via \", _jsx(_components.a, {\n        href: \"https://launchdarkly.com/\",\n        children: \"LaunchDarkly\"\n      }), \" has enabled us to excel at software delivery. We have been releasing over 6 times/day with a failure rate of \", _jsx(_components.code, {\n        children: \"<1%\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/plot/delivery-metrics.png\",\n      alt: \"Plot delivery metrics\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"üö® Observability\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Software systems are bound to fail. We use the following tools to observe our application in production so we can understand how it behaves and where the problems are:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"https://logflare.app/\",\n          children: \"Logflare\"\n        }), \" for log aggregation\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"https://sentry.io/\",\n          children: \"Sentry\"\n        }), \" for error tracking and performance monitoring\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"https://honeycomb.io/\",\n          children: \"Honeycomb\"\n        }), \" for application tracing\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"üôå Thanks for reading\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"I hope our stack inspires you to build great things in 2022 and that this post has provided some helpful guidance for developing a high-quality web application from the ground up!\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","scope":{}},"series":null},"__N_SSG":true}