{"pageProps":{"metadata":{"path":"content/post/2013-06-30-exploit-tileds-command-tool.mdx","title":"Exploit Tiled's command tool","date":"2013-06-30T14:15:27.000Z","categories":["Games development"],"series":null,"description":null,"slug":"exploit-tileds-command-tool","readingTime":"4 min read","draft":false,"disableComments":false,"keywords":[]},"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    img: \"img\",\n    p: \"p\",\n    h3: \"h3\",\n    a: \"a\",\n    ul: \"ul\",\n    li: \"li\",\n    em: \"em\",\n    div: \"div\",\n    pre: \"pre\",\n    code: \"code\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.img, {\n      src: \"/img/wp/tiled.png\",\n      alt: \"tiled.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Most of my spare time for the last month or so has gone to an Android pet project, which partially explains the lack of activity around here. However, such project gave me a little idea for a short tutorial flavoured article.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Level design, practically a synonym of iteration\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Everybody knows how essential iteration is for games development. Ideas tend to look awesome on paper, yet most of them perform poorly when implemented. Throwing away whole features and reworking others surely isn't new territory for you. Level designers probably know this better than anyone. Creating a \", _jsx(_components.a, {\n        href: \"http://www.youtube.com/watch?v=HNctAEfR97A\",\n        children: \"greybox level\"\n      }), \" and making hundreds of changes until it flows nicely and artist can know for sure where everything is going to be.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Tools like \", _jsx(_components.a, {\n        href: \"http://www.crydev.net/index.php\",\n        children: \"CryEngine SandBox\"\n      }), \" allow lightning fast iteration by letting the creator jump into game straight from the editor to test setups. The change something and test it cycle flows incredibly nicely and no time is wasted with annoying loading screens.\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/wp/CryENGINE-inital-scene.jpg\",\n      alt: \"CryENGINE-inital-scene.jpg\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Iteration can be cumbersome\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Nevertheless, I\\\"m using \", _jsx(_components.a, {\n        href: \"http://libgdx.badlogicgames.com/\",\n        children: \"libgdx\"\n      }), \" (check out the new website) along \", _jsx(_components.a, {\n        href: \"http://www.mapeditor.org/\",\n        children: \"Tiled\"\n      }), \" to make this pet project and things are different under this environment. Normally, one would go through the following process:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Create a level with Tiled.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Add it to the list of levels in the game. This could involve changed in an XML file or, much worse, fiddling with the source code.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Launch the game and navigate the menus until you find the newly created level.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Finally test it.\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.em, {\n          children: \"\\\"Oh, I need to move this obstacle a bit to the left\\\"\"\n        }), \".\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Back to 1, not before wishing to be stabbed in the face.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"You might think this is acceptable if a single iteration takes less than half a minute.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Wrong!\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"You\\\"ll be doing this a ridiculous number of times, so you better do yourself a favor and try shorten the process.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Tiled command tool at your service\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Luckily enough, we can use Tiled to execute any command passing the map file we\\\"re currently editing as a parameter from its main UI panel, it's almost as good as what CryEngine does. It only requires a little effort on our side, as the game needs to accept command line parameters and interpret them, we\\\"ll get to that later.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"First, click on the gears icon in Tiled and then select \", _jsx(_components.em, {\n        children: \"Edit Commands\"\n      }), \". Create a new one and name it \", _jsx(_components.em, {\n        children: \"Run level\"\n      }), \" for instance. The command will be executed from the Tiled folder, Program Files in my case. That's why I\\\"m using absolute paths to reach my game's executable.\"]\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"java -jar E:projectsmathmazemath.jar %mapfile\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/wp/tiled-command.png\",\n      alt: \"tiled-command.png\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.em, {\n        children: \"%mapfile\"\n      }), \" string is replaced by the absolute path to our level when the command is executed.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Now it's time to make the game accept an absolute path as a parameter and load a specific level when that happens, without going through all the menus. In my case I did something similar to this.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"public class Main {\\n\\tpublic static void main(String[] args) {\\n\\t\\tString level =  args.length &gt; 0 ? args[0] : &quot;&quot;;\\n\\t\\tnew LwjglApplication(new MyGame(level), new LwjglApplicationConfiguration());\\n\\t}\\n}\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Then, in \", _jsx(_components.em, {\n        children: \"MyGame\"\n      }), \" create method.\"]\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"if (!mapFile.empty() {\\n\\tLevel level = new Level(mapFile);\\n\\tgameScreen.setLevel(level);\\n\\tgameScreen.setDebug(true);\\n\\tsetScreen(gameScreen);\\n}\\nelse {\\n\\tsetScreen(splashScreen);\\t\\n}\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Within \", _jsx(_components.em, {\n        children: \"GameScreen\"\n      }), \" I had to detect whether we were in debug mode and, if so, think of the level as an absolute path.\"]\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"if (isDebug()) {\\n\\tmapLoader = new TmxMapLoader(new AbsoluteFileHandleResolver());\\n}\\nelse {\\n\\tmapLoader = new TmxMapLoader();\\n}\\n\\nTiledMap map = mapLoader.load(getLevel());\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"I noticed that libgdx doesn't include an absolute path file handle resolver, so I created it. Otherwise, it\\\"d think the file path is of the relative kind.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"public class AbsoluteFileHandleResolver implements FileHandleResolver {\\n\\t@Override\\n\\tpublic FileHandle resolve(String fileName) {\\n\\t\\treturn Gdx.files.absolute(fileName);\\n\\t}\\n}\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The last step was to export the game as a runnable jar to make it accessible from Tiled. After this, we can now finally run our level directly just by clicking on the gears icon. It requires some initial investment but I can assure you it pays off.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Easy as pie and fast!\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","scope":{}},"series":null},"__N_SSG":true}