<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.92.0" />
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>David Saltares &middot; Engineering Leadership &amp; Software Development</title>

  
  <link rel="stylesheet" href="../../css/poole.css">
  <link rel="stylesheet" href="../../css/hyde.css">
  <link rel="stylesheet" href="../../css/poole-overrides.css">
  <link rel="stylesheet" href="../../css/hyde-overrides.css">
  <link rel="stylesheet" href="../../css/hyde-x.css">
  <link rel="stylesheet" href="../../css/highlight/github-dark-dimmed.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../touch-icon-144-precomposed.png">
  <link href="../../img/favicon.png" rel="icon">

  
  
  
  <link href="%7balternate%20%7bRSS%20application/rss&#43;xml%20%20index%20alternate%20%20false%20false%20true%20false%20false%200%7d%20/index.xml%20https://saltares.com/index.xml%7d" rel="alternate" type="application/rss+xml" title="David Saltares &middot; David Saltares" />

  <meta name="description" content="I am David and I write about engineering leadership, remote teams, software development and games development.">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-4440744-3', 'auto');
    ga('send', 'pageview');
  </script>
  

  
  <link rel="canonical" href="https://saltares.com/" itemprop="url" />
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="../../"><img src="../../img/profile.jpg"
             alt="profile-picture" id="profile-img" title="David Saltares"></a>
      <h1><a href="../../">David Saltares</a></h1>
      <p class="lead">Engineering Leadership &amp; Software Development</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="../../">Blog</a></li>
      
      <li class="sidebar-nav-item"><a href="../../about">About</a></li>
      
      <li class="sidebar-nav-item"><a href="../../apps-tools">Apps &amp; Tools</a></li>
      
      <li class="sidebar-nav-item"><a href="../../game-jams">Game Jams</a></li>
      
      <li class="sidebar-nav-item"><a href="../../games">Games</a></li>
      
      <li class="sidebar-nav-item"><a href="../../libgdx-cross-platform-game-development-cookbook">Libgdx Cookbook</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a aria-label="Github profile" href="http://github.com/dsaltares"><i class="fa fa-github-square fa-2x"></i></a>
      
      
      <a aria-label="LinkedIn profile" href="https://www.linkedin.com/in/davidsaltares"><i class="fa fa-linkedin-square fa-2x"></i></a>
      
      
      <a aria-label="Twitter profile" href="http://twitter.com/d_saltares"><i class="fa fa-twitter-square fa-2x"></i></a>
      
      <a aria-label="RSS" href="../../index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-2x"></i></a>
      </li>
    </ul>

    

    <div class="copyright">
      <p>
        &copy; 2022 David Saltares.<br/>
        Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X.</a><br/>
        Hosted on <a href="https://pages.github.com/">Github Pages</a>.
      </p>
    </div>
  </div>
</div>


<div class="content container">
  <div class="posts">
    
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/games/primeras-colaboraciones-en-iberogre/">Primeras colaboraciones en IberOgre</a>
      </h1>
      <span class="post-date">Oct 11, 2010 &middot; 2 minute read &middot; <a href="https://saltares.com/games/primeras-colaboraciones-en-iberogre/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/games-development">Games development</a>
      </span>
      
      <p><strong>Mi motivación</strong> con respecto al proyecto <strong>ha ganado enteros</strong> durante los últimos días ya que, en contra de todas mis previsiones a medio plazo, ya <strong>hay gente interesada en <a href="http://osl2.uca.es/iberogre">IberOgre</a></strong>. No sólo como lectores sino como colaboradores activos lo cual considero realmente importante. Jamás hubiera pensado que IberOgre pudiese atraer participantes en una fase tan temprana de su desarrollo (pocos se suben a un barco que no está casi terminado).</p>
<p><strong>Alberto Cejas, compañero de carrera</strong> y con un proyecto entre manos relacionado con los videojuegos y Ogre3D <strong>ha redactado un artículo</strong> titulado &ldquo;<a href="http://osl2.uca.es/iberogre/index.php/Conceptos_Generales"><em>Conceptos Generales&rdquo;</em></a> en el que habla sobre la arquitectura y el diseño de nuestro engine de renderizado. Esto lo convierte en el primer colaborador en publicar un artículo en la wiki, espero que sea el primero de muchos. Le estoy muy agradecido y espero que siga aportando artículos tan buenos como este.</p>
<p><strong>La importancia de Twitter</strong> como herramienta para difundir proyectos ha quedado patente en este caso. Gracias a la cuenta oficial de IberOgre y la mía personal hemos aparecido como usuarios recomendados a gente interesada en el mundo de las 3D. A partir de ahí han surgido lectores como <a href="http://twitter.com/spectrumgomas">@spectrumgomas</a> que han <strong>pedido artículos nuevos, hecho correcciones y aportado ideas</strong>. El compañero <a href="http://twitter.com/che1404">@che1404</a> incluso se ha ofrecido a escribir, a lo que he aceptado rápidamente (no vaya a ser que se arrepienta). Estos usuarios, a su vez, han retwiteado mensajes o recomendado la wiki a otros muchos. Por todo esto, infinitas gracias.</p>
<p><strong>Espero que algún día se pueda formar una pequeña comunidad</strong> de desarrolladores de videojuegos 3D entorno a IberOgre y que aporten sus conocimientos. Puede que sea una utopía pero muestras de interés como la de los últimos días animan a seguir adelante.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/games/%c2%bfpor-que-ogre/">¿Por qué Ogre?</a>
      </h1>
      <span class="post-date">Oct 10, 2010 &middot; 4 minute read &middot; <a href="https://saltares.com/games/%c2%bfpor-que-ogre/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/games-development">Games development</a>
      </span>
      
      <p><img src="../../img/wp/porque.jpg" alt="porque.jpg"></p>
<p><strong>Antes de decidirme a utilizar Ogre</strong> frente a otros motores de renderizado (<a href="http://irrlicht.sourceforge.net/">Irrlicht</a>) o incluso motores de juego completos (<a href="http://www.panda3d.org/">Panda 3D</a>) estuve mirando lo que ofrecía cada uno. Es complicado guiarse por foros y comunidades ya que <strong>cada uno barre para casa</strong>, a veces con un ferviente fanatismo, ya os podéis imaginar. Ni de lejos soy un experto en desarrollo de videojuegos 3D y puede que haya pasado detalles por alto pero lo que más me llamó la atención de Ogre fue su <strong>capacidad de adaptación</strong> a todo tipo de situaciones. Tas el salto, mis razones.</p>
<p><img src="../../img/wp/pacific-storm.jpg" alt="pacific-storm.jpg"></p>
<h3 id="pon-el-piloto-automático-o-toma-el-control">Pon el piloto automático o toma el control</h3>
<p>En Ogre hay <strong>decenas de formas de hacer las cosas</strong> dependiendo del grado de control que quieras tomar sobre el proceso. Podemos indicarle el motor que lleve a cabo determinada tarea y que lo haga con el <strong>comportamiento por defecto</strong> o, aunque también es posible <strong>indicar de forma explícita decenas de parámetros</strong> para que se comporte exactamente como deseamos. Es cierto que características como está hacen que la curva de aprendizaje tenga una pendiente abrumadora en los primeros compases. No obstante, no he visto ningún engine con <strong>la flexibilidad de Ogre</strong>.</p>
<p>Podría citar muchos ejemplos en los que reluce esta filosofía como, por ejemplo, <strong>la secuencia de inicialización de Ogre</strong> en la que se nos presentan dos vías principales. Lo que sigue es un pequeño ejemplo pasando por alto ciertas reglas de estilo con el objetivo de no extenderme demasiado.</p>
<p><em>Método automático:</em></p>
<pre tabindex="0"><code>// Creamos la raíz con ficheros de plugin y configuración válidos
Root* raiz = new Root(&quot;plugins.cfg&quot;, &quot;ogre.cfg&quot;, &quot;ogre.log&quot;);

// Ventana de Ogre
RenderWindow* ventana;

// Restauramos la configuración
raiz-&gt;restoreConfig();

// Inicializamos la librería
ventana = Ogre-&gt;initialize(true,&quot;SionDream - Ogre automático&quot;);
</code></pre><p><em>Método manual:</em></p>
<pre tabindex="0"><code>// Creamos la raíz
Root* raiz = new Root();

// Ventana de Ogre
RenderWindow* ventana;

// Seleccionamos el plugin de renderizado de Open GL
raiz-&gt;loadPlugin(&quot;RenderSystem_GL&quot;);
String nombreGL(&quot;OpenGL Rendering Subsystem&quot;);
RenderSystemList *listaRender = raiz-&gt;getAvaiableRenderers();
RenderSystemList::iterator i;
bool stop = false;

for (i = listaRender-&gt;begin(); i != listaRender-&gt;end() &amp;&amp; !stop; i++) {
    if ((*i)-&gt;getName = nombreGL) {
        raiz-&gt;setRenderSystem(*i);
        stop = true;
    }
}

if (raiz-&gt;getRenderSystem() == NULL) {
    // Mensaje de error
    delete raiz;
    exit(1);
}

// Inicializamos Ogre
raiz-&gt;initialise(false);

// Creamos la ventana
ventana = raiz-&gt;createRenderWindow(
  &quot;SionDream - Ogre inicialización manual&quot;,
  1280, 720,
  true,
  0
);
</code></pre><p>Podríamos haber ido más allá hasta lograr <strong>embeber una ventana de Ogre en una de QT</strong> para conseguir un render dentro de una aplicación de diseño de interiores, por ejemplo. Parámetros como la sincronización vertical y decenas de pijadas más, pueden ser personalizados.</p>
<p><img src="../../img/wp/venetica.jpg" alt="venetica.jpg"></p>
<h3 id="extensibilidad-a-través-de-plugins">Extensibilidad a través de plugins</h3>
<p>La arquitectura de Ogre ofrece un <strong>sistema de plugins</strong> de forma que podemos sobreescribir la gestión por defecto de un subsistema por el que necesitemos. Como se ha visto en el ejemplo anterior, el propio sistema de renderizado viene en forma de plugin (Open GL o Direct3D). Ogre provee una interfaz para llevar a cabo una determinada tarea por lo que es posible proporcionar <strong>distintas implementaciones</strong> para dicha interfaz.</p>
<p>Que Ogre se base en gran parte en plugins no quiere decir que nos toque desarrollar los nuestros. <strong>La comunidad se ha encargado de desarrollar multitud</strong> de extensiones para efectos de partículas, colisiones, gestión del scene graph etc. Simplemente debemos escoger el que se ajuste a nuestras necesidades.</p>
<p><img src="../../img/wp/victory.jpg" alt="victory.jpg"></p>
<h3 id="construye-escenas-de-todo-tipo">Construye escenas de todo tipo</h3>
<p><strong>El SceneManager</strong> es la interfaz que se encarga de ordenar y <strong>gestionar el scene graph</strong> para su renderizado entre otros. Una de las características que más me llamó la atención de Ogre fue la existencia de una gran variedad de SceneManager especializados en situaciones diferentes.</p>
<p>Imagina que estamos desarrollando <strong>un título de acción</strong> en el que nuestro protagonista debe recorrer los pasillos de una instalación acabando con monstruos procedentes de un experimento fallido, ¿alguien dijo Half-Life?. Necesitaremos representar <strong>escenarios cerrados con una gran densidad de elementos</strong>. ¡Bien! Existe un SceneManager específico para este caso de manera que obtendremos un rendimiento mucho mayor utilizándolo.</p>
<p>Puede que nuestro proyecto consista en <strong>un juego de rol</strong> en el que nuestro héroe debe recorrer grandes extensiones de terreno acabando con criaturas mitológicas. Un mundo abierto difiere muchísimo de la instalación pasillera del caso anterior. <strong>El escenario es cientos de veces mayor</strong> pero precisa de menos detalle. Estamos de suerte porque en Ogre existe un plugin para gestionar entornos abiertos virtualmente infinitos.</p>
<p><img src="../../img/wp/haunted.jpg" alt="haunted.jpg"></p>
<h3 id="multitud-de-features-adicionales">Multitud de features adicionales</h3>
<p>Ogre cuenta con muchas características adicionales listadas <a href="http://osl.uca.es/iberogre/index.php/Conociendo_Ogre3D#Caracter.C3.ADsticas">aquí</a> aunque en este artículo he expuesto lo que más útil y sorprendente me ha parecido. Supongo que cada uno tendrá sus features preferidas. En cualquier caso, consideraba interesante exponer en el blog las razones de mi elección las cuales c<strong>ompensan ampliamente la empinada curva de dificultad</strong>.</p>
<p>Próximamente más novedades sobre IberOgre.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/hobbies/battlestar-galactica/">Battlestar Galactica</a>
      </h1>
      <span class="post-date">Oct 7, 2010 &middot; 3 minute read &middot; <a href="https://saltares.com/hobbies/battlestar-galactica/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/hobbies">Hobbies</a>
      </span>
      
      <p><img src="../../img/wp/battlestar-galactica.jpg" alt="battlestar-galactica.jpg"></p>
<p>Demasiado tiempo he dilatado el visionado de <a href="http://en.wikipedia.org/wiki/Battlestar_Galactica"><strong>Battlestar Galactica</strong></a> pero estamos ante una de las series por las que es imperativo tener verdadera predisposición o de lo contrario no exprimiremos su contenido como es debido. Una miniserie de dos episodios y 4 intensas temporadas forman la que es, a mi juicio, l<strong>a mejor producción televisiva de ciencia ficción</strong> de todos los tiempos. Bueno, puede que aún esté en shock tras los capítulos finales pero os hacéis una idea. Dudo que sea capaz de hacer una reseña a la altura ya que, intentar condensar el <strong>grandioso recorrido</strong> de la serie en un puñado de párrafos es poco más que estúpido, se hará lo que se pueda.</p>
<p><img src="../../img/wp/battlestar-galactica-04.jpg" alt="battlestar-galactica-04.jpg"></p>
<p><strong>Decenas de veces me he topado con la historia</strong> de <em>&ldquo;humanos construyen robots que se rebelan contra sus amos&rdquo;</em> pero ninguna tan bien montada como esta. <strong>La paz entre humanos y Cylon era delicada</strong> pero se mantuvo durante 40 años hasta que <strong>un traidor permitió el regreso</strong> de las tostadoras. Las 12 colonias que conformaban los restos de la humanidad se reducen a la pequeña flota que consigue huir. La escuadra de naves encabezadas por la vieja estrella de combate Galactica comenzará un <strong>duro viaje hacia su salvación</strong> plagado de entramados políticos, profecías arcanas y combates estelares.</p>
<p><strong>El comienzo</strong> de la serie carga con la <strong>fama de ser desalentador</strong> ya que se explaya a la hora de presentar a los personajes principales y sus motivaciones. No obstante, el espectador no tardará en verse recompensado identificándose con muchos de ellos y es que al final <strong>lo que importa es el todo</strong>, el conjunto de experiencias. En Battlestar Galactica encontraremos <strong>personajes llenos de matices</strong> que evolucionan a lo largo del recorrido y nos sorprenderán en más de una ocasión. Cómo olvidar al hedonista doctor <strong><a href="http://www.imdb.com/name/nm0130536/">Gaius Baltar</a></strong> o al inquebrantable Almirante <strong><a href="http://www.imdb.com/name/nm0001579/">William Adama</a></strong> entre otros muchos.</p>
<p><img src="../../img/wp/battlestar-galactica-03.jpg" alt="battlestar-galactica-03.jpg"></p>
<p>En realidad, los personajes no son más que portadores de los mensajes que nos lanza la serie. Galactica ofrece <strong>reflexiones de toda índole</strong> filosóficas, religiosas, morales y políticas. La búsqueda de Dios, la lucha de clases, qué define a un ser humano, la elección del mal menor y otros muchos dilemas son los que iremos encontrando capítulo a capítulo. Desde luego, es <strong>el trabajo de ciencia ficción más maduro que he visto en una pantalla</strong>, diferenciándose de otras producciones como <a href="http://www.imdb.com/title/tt0076759/">Star Wars</a> (¡ojo, me encanta esta saga!). Se pueden mencionar películas excelentes en este ámbito tales como <a href="http://www.imdb.com/title/tt0083658/">Blade Runner</a> o <a href="http://www.imdb.com/title/tt0133093/">Matrix</a> pero ninguna presenta tanta diversidad como Galactica. Vale, parte con ventaja porque es una serie de cuatro temporadas, pero qué se le va a hacer.</p>
<p><img src="../../img/wp/battlestar-galactica-01.jpg" alt="battlestar-galactica-01.jpg"></p>
<p><strong>Como hilo conductor</strong> tenemos la constante huída de la flota con los Cylon pisándoles los talones desembocando en <strong>escenas llenas de acción y tensión</strong>. En el plano de los efectos especiales, teniendo en cuenta que se trata de una teleproducción, podemos darnos con un canto en los dientes. <strong>Los puristas de la física</strong> alzarán su voz y dirán que contiene muchos errores como la presencia de sonido en el vacío. A ellos les diría <strong>que se vayan a ver <a href="http://www.imdb.com/title/tt0062622/">2001 Odisea en el espacio</a></strong> y me dejasen tranquilo, al menos los disparos no son haces de luz sino misiles y munición tangible. Es estúpido ponerse tan quisquilloso, <strong>es entretenimiento, no un ensayo sobre física aeroespacial</strong>.</p>
<p><img src="../../img/wp/galactica.jpg" alt="galactica.jpg"></p>
<p>Bueno, el artículo se está extendiendo más de lo esperado, sólo me queda instar a todos los que aprecien mínimamente la ciencia ficción a ver Battlestar Galactica. Tras haberla disfrutado al completo la sitúo al nivel de otras obras maestras como <a href="http://www.imdb.com/title/tt0248654/">Six Feet Under</a>.</p>
<p><strong>En una palabra: sublime</strong>.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/hobbies/community-1%c2%aa-temporada/">Community, 1ª temporada</a>
      </h1>
      <span class="post-date">Oct 2, 2010 &middot; 3 minute read &middot; <a href="https://saltares.com/hobbies/community-1%c2%aa-temporada/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/hobbies">Hobbies</a>
      </span>
      
      <p><img src="../../img/wp/community.jpg" alt="community.jpg"></p>
<p><strong>Cuando uno llega agotado a casa</strong> es posible que no tenga ánimos de ver algo demasiado complejo, leer un libro profundo ni nada que suponga un esfuerzo extra. Para esos días, <strong>las comedias son un remedio estupendo</strong>, por eso y varias recomendaciones de amigos <strong>me zampé la primera temporada completa de <a href="http://www.imdb.com/title/tt1439629/">Community</a></strong>. En las líneas que siguen, una breve opinión sobre esta serie de creciente éxito de la <a href="http://en.wikipedia.org/wiki/NBC">NBC</a>.</p>
<p><strong>Community nos lleva a la completamente lamentable Universidad de Greendale</strong> en la que convergen personajes de lo más variopinto. Como protagonista tenemos a <strong><a href="http://www.imdb.com/name/nm0570364/">Jeff</a>, abogado sin escrúpulos</strong> hasta que descubrieron que su título era falso y ahora debe conseguir el verdadero. <strong><a href="http://www.imdb.com/name/nm1843026/">Britta</a>, es típica chica independiente</strong> que Jeff tratará de atrapar por todos los medios (aunque éstos sean poco éticos). <strong><a href="http://www.imdb.com/name/nm0000331/">Pierce</a> es un jubilado prepotente</strong>, racista y algo homófobo casado y divorciado en 7 ocasiones. <strong><a href="http://www.imdb.com/name/nm2255973/">Troy</a> era el típico campeón de fútbol</strong> en el instituto que ahora, venido a menos, no se encuentra cómodo en la Universidad. <strong><a href="http://www.imdb.com/name/nm2209821/">Abed</a> es un adicto a películas y series de TV</strong> capaz de convertir y relacionar cualquier suceso de <em>&ldquo;la realidad&rdquo;</em> con un momento de ficción. <strong><a href="http://www.imdb.com/name/nm1304328/">Shirley</a> es una ama de casa</strong> muy católica que no tuvo la oportunidad de estudiar. Finalmente, <a href="http://www.imdb.com/name/nm1555340/"><strong>Annie</strong></a>, la más joven del grupo, es una <strong>ex-adicta a pastillas</strong> traumatizada por su paso por el instituto.</p>
<p><img src="../../img/wp/community-02.jpg" alt="community-02.jpg"></p>
<p>Esta colección tan estrambótica se verá obligado a colaborar en forma de <strong>grupo de estudio</strong> para aprobar las <strong>clases de español con el temible <a href="http://www.imdb.com/name/nm0421822/">Señor Chang</a></strong>. Community no pretende ser una serie razonable ni realista, <strong>es una hipérbole de personalidades</strong> que chocan y explotan. Situaciones absurdas, extremas pero, sobretodo, geniales e hilarantes. Sabemos que dista mucho de la realidad pero lo aceptamos sin rechistar. Destaca por encima de todo la <strong>ausencia de las ridículas risas enlatadas</strong> que tanto fuerzan las situaciones. Tendremos que enfrentarnos a silencios incómodos y una pequeña ración de esa vergüenza ajena tan divertida que tienen las series cómicas británicas.</p>
<p><strong>Me encanta que la serie se ría de sí misma</strong> por medio de Abed, el seriéfilo. El que considero uno de los mejores personajes cómicos en mucho tiempo, siempre señala con el dedo los clichés haciendo constantes referencias al cine de forma que rompe con el monótono ritmo que llevarían otras producciones.</p>
<p><img src="../../img/wp/community-03.jpg" alt="community-03.jpg"></p>
<p><strong>Es posible que le cueste arrancar</strong>, es algo que he leído y escuchado de otros compañeros pero el que tenga paciencia durante los tres primeros episodios no se arrepentirá. Vienen en dosis de 20 minutos y eso se agradece, tanto que ya voy a catar la segunda temporada que acaba de comenzar. Si crees que series como la excepcional <a href="http://www.imdb.com/title/tt0460649/"><em>&ldquo;How I met your mother&rdquo;</em></a> están algo quemadas puede que necesites algo nuevo, Community es <strong>de tus mejores opciones</strong>.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/computing/backup-a-traves-de-la-red-con-tar-y-ssh/">Backup a través de la red con tar y ssh</a>
      </h1>
      <span class="post-date">Oct 1, 2010 &middot; 2 minute read &middot; <a href="https://saltares.com/computing/backup-a-traves-de-la-red-con-tar-y-ssh/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/computing">Computing</a>
      </span>
      
      <p><img src="../../img/wp/tar-ssh.png" alt="tar-ssh.png"></p>
<p>La administración de sistemas no es una de mis pasiones pero en mi trabajo actual tengo que ejercer dicha actividad combinada con el desarrollo web. Hace unas semanas <strong>tuvimos que actualizar una aplicación web</strong> que manejaba un volumen bastante importante de datos. A pesar de que se hacían copias incrementales diarias utilizando rsync <strong>estimamos oportuno hacer una copia completa</strong> y colocarla en una máquina distinta por si la ley de Murphy decidía darnos una lección. El texto que sigue es un truco para hacer <strong>una copia gigantesca y mandarla mediante ssh</strong> a otra máquina <strong>sin perder demasiado el tiempo</strong>.</p>
<h3 id="la-respuesta-rápida-y-cutre">La respuesta rápida (y cutre)</h3>
<p>Comprimir <strong>200GB</strong> con tar y transferirlos vía ssh es extremadamente lento aunque las máquinas estén en la misma subred. Este sería <strong>el enfoque inicial</strong>:</p>
<pre tabindex="0"><code># Comprimimos
tar cvzf directorio directorio.tar.gz

# Enviamos
scp directorio.tar.gz usuario@host:directorio_destino
</code></pre><h3 id="la-solución">La solución</h3>
<p>Decidimos que <strong>el tiempo era oro</strong>, máxime cuando el backup y la actualización implicaban cortar el servicio a todos los usuarios. Lo ideal sería ir enviando datos a medida que éstos se van comprimiendo. Un poco de búsqueda en Google y retoque de parámetros para ajustarlo a nuestras necesidades bastaron para ahorrar prácticamente la mitad de tiempo. A continuación <strong>el script que encierra la magia</strong> (obviando datos concretos):</p>
<pre tabindex="0"><code>#!/bin/sh

# Fecha de la copia
FECHA=$(date +&quot;%F-%H-%M-%S&quot;)

# Directorio a copiar
DIR_BACKUP=/home/david

# Máquina remota
HOST=backups.saltares.com

# Usuario de la máquina remota
USER=siondream

# Directorio destino
HOST_DIR=/home/siondream/backups

# Hacemos el backup
tar cvzf - $DIR_BACKUP | ssh $USER@$HOST &quot;cat &gt; ${HOST_DIR}/${DIR_BACKUP}-${FECHA}.tar.gz&quot;
</code></pre><p>Con el clásico <em>tar cvzf</em> tenemos una compresión común de <em>$DIR_BACKUP</em>. No obstante, el guión <em>–</em> sirve para desviar el flujo a la salida estándar la cual convertimos en la entrada estándar del siguiente comando mediante la tubería <em>|</em>. El chorro de bytes se envía mediante <em>ssh</em> (al equipo <em>$HOST</em> con nuestro usuario <em>$USER</em>) y se vuelca en el fichero <em>$DIR_BACKUP-$FECHA.tar.gz</em> utilizando <em>cat</em>. Puede parecer algo confuso pero <strong>si lo piensas es maravilloso</strong> y tiene todo el sentido del mundo.</p>
<h3 id="lo-mismo-casi-en-la-mitad-de-tiempo">Lo mismo casi en la mitad de tiempo</h3>
<p>Si tienes que hacer grandes copias y enviarlas por la red, <strong>este pequeño truco es tu amigo</strong>. Tras completar el proceso de actualización con éxito hice algunas pruebas para calcular la mejora que proporciona esta técnica. Obtuve <strong>resultados impresionantes</strong>: enviar los datos mientras éstos se comprimen lleva <strong>casi la mitad de tiempo</strong> que hacerlo en etapas separadas.</p>

      
    </div>
    
        <div class=pagination>
        <ul class="pagination">
            <li>
                <a href="../../">««</a>
            </li>
            
            <li>
                <a href="../../page/54/">«</a>
            </li>
            
            <li class="active">
                <a href="../../page/55/">55</a>
            </li>
            
            <li>
                <a href="../../page/56/">»</a>
            </li>
            
            <li>
                <a href="../../page/62/">»»</a>
            </li>
        </ul>
    </div>
  </div>
</div>


<script type="text/javascript">
var disqus_shortname = "siondream";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>


<script src="../../js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
<script src="../../js/load-photoswipe.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
</body>
</html>

