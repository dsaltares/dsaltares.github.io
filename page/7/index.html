<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.98.0" />
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>David Saltares &middot; Engineering Leadership &amp; Software Development</title>

  
  <link rel="stylesheet" href="../../css/poole.css">
  <link rel="stylesheet" href="../../css/hyde.css">
  <link rel="stylesheet" href="../../css/poole-overrides.css">
  <link rel="stylesheet" href="../../css/hyde-overrides.css">
  <link rel="stylesheet" href="../../css/hyde-x.css">
  <link rel="stylesheet" href="../../css/highlight/github-dark-dimmed.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../touch-icon-144-precomposed.png">
  <link href="../../img/favicon.png" rel="icon">

  
  
  
  <link href="%7balternate%20%7bRSS%20application/rss&#43;xml%20%20index%20alternate%20%20false%20false%20true%20false%20false%200%7d%20/index.xml%20https://saltares.com/index.xml%7d" rel="alternate" type="application/rss+xml" title="David Saltares &middot; David Saltares" />

  <meta name="description" content="I am David and I write about engineering leadership, remote teams, software development and games development.">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-4440744-3', 'auto');
    ga('send', 'pageview');
  </script>
  

  

  
  <link rel="canonical" href="https://saltares.com/" itemprop="url" />
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="../../"><img src="../../img/profile.jpg"
             alt="profile-picture" id="profile-img" title="David Saltares"></a>
      <h1><a href="../../">David Saltares</a></h1>
      <p class="lead">Engineering Leadership &amp; Software Development</p>
      <div class="subscribe"><a href="https://tinyletter.com/dsaltares/">✉️ Subscribe</a></div>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="../../">Blog</a></li>
      
      <li class="sidebar-nav-item"><a href="../../about">About</a></li>
      
      <li class="sidebar-nav-item"><a href="../../apps-tools">Apps &amp; Tools</a></li>
      
      <li class="sidebar-nav-item"><a href="../../game-jams">Game Jams</a></li>
      
      <li class="sidebar-nav-item"><a href="../../games">Games</a></li>
      
      <li class="sidebar-nav-item"><a href="../../libgdx-cross-platform-game-development-cookbook">Libgdx Cookbook</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a aria-label="Github profile" href="http://github.com/dsaltares"><i class="fa fa-github-square fa-2x"></i></a>
      
      
      <a aria-label="LinkedIn profile" href="https://www.linkedin.com/in/davidsaltares"><i class="fa fa-linkedin-square fa-2x"></i></a>
      
      
      <a aria-label="Twitter profile" href="http://twitter.com/d_saltares"><i class="fa fa-twitter-square fa-2x"></i></a>
      
      <a aria-label="RSS" href="../../index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-2x"></i></a>
      </li>
    </ul>

    

    <div class="copyright">
      <p>&copy; 2022 David Saltares.</p>
    </div>
  </div>
</div>


<div class="content container">
  <div class="posts">
    
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/projects/ashley-1-7-3-released/">Ashley 1.7.3 released!</a>
      </h1>
      <span class="post-date">Sep 10, 2016 &middot; 1 minute read &middot; <a href="https://saltares.com/projects/ashley-1-7-3-released/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/games-development">Games development</a><a class="label" href="../../categories/projects">Projects</a>
      </span>
      
      <p>
  <img src="../../img/ashley/ashley-logo.png" alt="ashley-logo.png">

</p>
<p>There&rsquo;s a new <a href="https://github.com/libgdx/ashley">Ashley</a> release, check the changes for <a href="https://github.com/libgdx/ashley/releases/tag/ashley-1.7.3">1.7.3</a> below:</p>
<ul>
<li><strong>API addition</strong>: Adds ‘createComponent()&quot; method to <code>Engine</code> class. Commit 07fc2ba6bcd9996c472c651b56b57b32fd8fd3a7.</li>
<li><strong>API addition</strong>: Adds ‘createEntity()&quot; method to <code>Engine</code> class. Commit 45dd7e0e4a52c8d65f520fac4e8f4e83471b215b.</li>
<li><strong>API addition</strong>: Adds ‘addAndReturn()&quot; method to <code>Entity</code> class. Commit 423148a2719873efb50d4f2b3982c247df4fceca.</li>
<li><strong>Bug fix</strong>: Fixes systems going out of priority order after removal. Issue #237.</li>
<li><strong>Bug fix</strong>: Fixes returning pooled entity to the entity pool twice. Issue #221.</li>
<li><strong>Update</strong>: uses Travis for CI. Commit c4265eff694cfb34eaef1bdd929ee398c1ccfa64.</li>
<li><strong>Update</strong>: uses Libgdx 1.9.4.</li>
</ul>
<p>To use it, change your dependency to <code>com.badlogicgames.gdx:ashley:1.7.3</code>. The new nightly dependency is <code>com.badlogicgames.gdx:ashley:1.7.4-SNAPSHOT</code>. Thanks for your continued support!</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/general/ashley-1-7-2-released/">Ashley 1.7.2 released</a>
      </h1>
      <span class="post-date">Feb 29, 2016 &middot; 1 minute read &middot; <a href="https://saltares.com/general/ashley-1-7-2-released/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/general">General</a>
      </span>
      
      <p>
  <img src="../../img/ashley/ashley-logo.png" alt="ashley-logo.png">

</p>
<p>Small <a href="https://github.com/libgdx/ashley">Ashley</a> release, check the changes for <a href="https://github.com/libgdx/ashley/releases/tag/ashley-1.7.2">1.7.2</a> below:</p>
<ul>
<li><a href="https://github.com/libgdx/ashley/issues/209"><strong>Bug fix</strong></a>: <code>Engine</code> doesn&rsquo;t use <code>EntitySystem</code> <code>iterator()</code>.</li>
<li><a href="https://github.com/libgdx/ashley/issues/210"><strong>Bug fix</strong></a>: Fixes <code>Engine</code> left unusable, in the updating state, after an uncaught exception in a subsystem.</li>
<li><a href="https://github.com/libgdx/ashley/issues/210"><strong>Bug fix</strong></a>: Fixes <code>FamilyManager</code> not cleaning up properly when a triggering a listener that throws.</li>
</ul>
<p>To use it, change your dependency to <code>com.badlogicgames.gdx:ashley:1.7.2</code>. The new nightly dependency is <code>com.badlogicgames.gdx:ashley:1.7.3-SNAPSHOT</code>.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/games/built-in-console-for-libgdx-games/">Built-in console for Libgdx games</a>
      </h1>
      <span class="post-date">Feb 20, 2016 &middot; 2 minute read &middot; <a href="https://saltares.com/games/built-in-console-for-libgdx-games/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/games-development">Games development</a>
      </span>
      
      <p>A lot of games come with a built-in console that lets you enter commands, which is especially useful during development. Most times, it gets disabled before shipping although, occasionally, devs let you bring it up and enter cheat codes. CryEngine comes with a built-in console.</p>
<p>
  <img src="../../img/others/console1.jpg" alt="console1.jpg">

</p>
<p>When you&quot;re testing a new feature you just wrote, it can be incredibly useful to pause, reset the scene, teleport your character, become invincible, switch to a different level or even adjust some parameters in the AI. Some engines use a scripting language that can hot-reload new or modified scripts, but that may not always be feasible. Having a built-in console to enter these commands surely is pretty darn handy! It would be reasonably easy to write a custom console with Libgdx, you just need to leverage Scene2D and have some logic to support arbitrary commands and let the game code handle them. But why do that when you have <a href="https://github.com/StrongJoshua/libgdx-inGameConsole"><code>libgdx-inGameConsole</code></a>? No reason at all! It&rsquo;s incredibly simple to set it up. First, add the following dependency to your <code>build.gradle</code> file and refresh your project&rsquo;s dependencies. compile &ldquo;com.strongjoshua:libgdx-inGameConsole:0.3.2&rdquo; You can instantiate the <code>Console</code> inside your <code>create()</code> method. Use the <code>setSizePercent()</code> and <code>setPositionPercent()</code> methods to configure where your console will show up and how much of the screen it&quot;ll take. Finally, you can also override the key to toggle the console.</p>
<pre tabindex="0"><code>private Console console;

@Override
public void create() {
    ...

    console = new Console();
    console.setSizePercent(100, 33);
    console.setPositionPercent(0, 67);
    console.setKeyID(Keys.Z);
}
</code></pre><p>Remember to call <code>draw()</code> inside your <code>render()</code> method.</p>
<pre tabindex="0"><code>console.draw();
</code></pre><p>Wonderful, we now have a working in-game console capable of doing absolutely nothing. We need to add our command processing logic. Let&rsquo;s specialize the <code>CommandExecutor</code> class and add some methods to load a level and spawn baddies.</p>
<pre tabindex="0"><code>public class GameCommandExecutor extends Command {
    private Console console;

    public GameCommandExecutor(Console console) {
        this.console = console;
    }

    public void loadLevel(String levelName) {
        console.log(&#34;loading level &#34; + levelName, Console.LogLevel.SUCCESS);
    }

    public void spawnEnemy(String type, float x, float y, float z) {
        console.log(&#34;spawning enemy &#34; + type, Console.LogLevel.SUCCESS);
    }

    public void clear() {
        console.clear();
    }
}
</code></pre><p>At some point, we need to register the executor with the console.</p>
<pre tabindex="0"><code>console.setCommandExecutor(new GameCommandExecutor(console));
</code></pre><p>Done, that&rsquo;s it!</p>
<p>
  <img src="../../img/others/libgdx-console.png" alt="libgdx-console.png">

</p>
<p>The console uses the Libgdx reflection module to figure out which commands your <code>CommandExecutor</code> supports, which means it&rsquo;s fully compatible with the WebGL backend. It&rsquo;s also possible to configure the look and feel of the console if you provide a <code>Skin</code> to its constructor. To know more, check its comprehensive <a href="http://strongjoshua.com/javadocs/in-game_console/">documentation</a>.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/games/2d-vision-system-with-ashley-and-box2d/">2D vision system with Ashley and Box2D</a>
      </h1>
      <span class="post-date">Jan 30, 2016 &middot; 8 minute read &middot; <a href="https://saltares.com/games/2d-vision-system-with-ashley-and-box2d/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/games-development">Games development</a>
      </span>
      
      <p>
  <img src="../../img/wp/javaw-2016-01-22-22-59-09-54-1-e1454169566721.png" alt="javaw-2016-01-22-22-59-09-54-1-e1454169566721.png">

</p>
<p>In <a href="../../game-jams/sloppynauts/">Sloppynauts</a> the player had to remain undetected, avoiding CCTV cameras and alien baddies. We constantly had to determine who could see who and whether the player was hidden behind something. We wrote a nice reusable system using <a href="https://github.com/libgdx/ashley">Ashley</a> and <a href="http://box2d.org/">Box2D</a> and I think it&quot;d be a shame if it went to waste. So here it is in case you&quot;d like to use it.</p>
<p>This 2D vision system is generic enough to work with both side-scrolling and top-down games. Surely it can be further optimised and tailored to your needs… Hey, it was done for a game jam! Nevertheless, it could be a decent starting point!</p>
<p>Before we get down to business, make sure you understand what Ashley is and what <a href="http://www.gamedev.net/page/resources/_/technical/game-programming/understanding-component-entity-systems-r3013">component based entity systems</a> are all about.</p>
<h3 id="vision-system-concepts">Vision System concepts</h3>
<p>We want to give some of the entities in our game world the ability to see other entities. Both observers and observables will necessarily have a location in our game world. However, we need some extra information about our observers, specifically the area they can cover at any given point in time, ie. their field of view. In the diagram below you can see a couple of observers and three observables. One of the observables can be seen, the second one is complete outside of both FOVs whilst the third one is hidden behind a box. 
  <img src="../../img/wp/vision-system-diagram-1.png" alt="vision-system-diagram-1.png">

 We simply want to ask our system: <em>&ldquo;can this entity see this other entity?&rdquo;</em></p>
<h3 id="observable-and-observer-components">Observable and Observer components</h3>
<p>Our <code>Observable</code> component is pretty trivial, it simply has a position.</p>
<pre tabindex="0"><code>public class ObservableComponent implements Component {
    public Vector2 position = new Vector2();
}
</code></pre><p>The <code>Observer</code> component has a little more information.</p>
<pre tabindex="0"><code>public class ObserverComponent implements Component {
    public Vector2 position = new Vector2();
    public float angle = 0.0f;
    public float distance = 5.0f;
    public float fovAngle = 45.0f;
}
</code></pre><ul>
<li><code>angle</code>: where the entity is looking at.</li>
<li><code>distance</code>: how far it can see.</li>
<li><code>fovAngle</code>: the angle it can cover. Members are initialised with default values, you can obviously change these.</li>
</ul>
<p>###The Vision Entity System</p>
<p>The <code>VisionSystem</code> is where the magic happens, you can see the full outline below.</p>
<pre tabindex="0"><code>public class VisionSystem extends IteratingSystem implements EntityListener {
    public VisionSystem(World world) {}

    public boolean canSee(Entity observer, Entity observable) {}

    // EntitySystem
    public void addedToEngine(Engine engine) {}
    public void removedFromEngine(Engine engine) {}

    // EntityListener
    public void entityAdded(Entity entity) {}
    public void entityRemoved(Entity entity) {}

    // IteratingSystem
    protected void processEntity(Entity observer, float deltaTime) {}

    // Utility
    private void updateVision(Entity observer) {}
    private void updateVision(Entity observer, Entity observable) {}
    private boolean inFov(Entity entity, Entity target) {}
    private void raycast(Entity entity, Entity target) {}
    private void addToVision(Entity observer, Entity observable) {}
    private void removeFromVision(Entity observer, Entity observable) {}
}
</code></pre><p>The constructor will take a Box2D <code>World</code> as we need it to make line of sight (LoS) queries. We will also tell Ashley that we want the system to process entities with <code>ObserverComponent</code>.</p>
<pre tabindex="0"><code>public VisionSystem(World world) {
    super(Family.all(ObserverComponent.class).get());

    this.world = world;
}
</code></pre><p>In order to be able to answer the <code>canSee()</code> question, we will keep a map of observer entities to the collection of observables that it can see at any given time. The map will be updated every frame.</p>
<pre tabindex="0"><code>private ObjectMap&lt;Entity, ObjectSet&lt;Entity&gt;&gt; vision = new ObjectMap();
</code></pre><p>We will also need the collection of entities with an <code>ObservableComponent</code>, they are the candidates to make into the vision map as targets.</p>
<pre tabindex="0"><code>private ImmutableArray&lt;Entity&gt; observables;
</code></pre><p>The <code>addedToEngine()</code> and <code>removedFromEngine()</code> methods are invoked whenever we register the system with the engine. We can hook into them to grab the immutable list of observables as well as to register our vision system as a listener for observers. That way, we can pre-populate and clear up our vision map as observers come and go.</p>
<pre tabindex="0"><code>@Override
public void addedToEngine(Engine engine) {
    super.addedToEngine(engine);
    observables = engine.getEntitiesFor(
        Family.all(ObservableComponent.class).get()
    );
    engine.addEntityListener(getFamily(), this);
}

@Override
public void removedFromEngine(Engine engine) {
    super.removedFromEngine(engine);
    engine.removeEntityListener(this);
}

@Override
public void entityAdded(Entity entity) {
    vision.put(entity, new ObjectSet&lt;Entity&gt;());
}

@Override
public void entityRemoved(Entity entity) {
    vision.remove(entity);
}
</code></pre><p>The <code>canSee()</code> method is quite trivial, we simply check if the observable is in the set of visible entities for the given observer.</p>
<pre tabindex="0"><code>public boolean canSee(Entity observer, Entity observable) {
    ObjectSet&lt;Entity&gt; observables = vision.get(observer);

    if (observables == null) {
        return false;
    }

    return observables.contains(observable);
}
</code></pre><p><code>VisionSystem</code> is an <code>IteratingSystem</code>, so we need to implement the <code>processEntity()</code> method, which will be invoked once a frame for every observer registered with the engine. Here is where the vision map entry for the observer gets updated.</p>
<pre tabindex="0"><code>@Override
protected void processEntity(Entity observer, float deltaTime) {
    updateVision(observer);
}
</code></pre><p>In order to do that, we go through the collection of observables and check whether they should be added or removed from the observer&rsquo;s visible entities.</p>
<pre tabindex="0"><code>private void updateVision(Entity observer) {
    for (Entity observable : observables) {
        updateVision(observer, observable);
    }
}
</code></pre><p>The <code>addToVision()</code> and <code>removeFromVision()</code> utility methods will simply help us update the vision map. We make the assumption that there will always be an entry for every observer in the engine.</p>
<pre tabindex="0"><code>private void addToVision(Entity observer, Entity observable) {
    vision.get(observer).add(observable)
}

private void removeFromVision(Entity observer, Entity observable) {
    vision.get(observer).remove(observable)
}
</code></pre><p>To know whether an observer can see an observable two conditions need to be met: the observable has to be within the observer&rsquo;s FoV and there must be an unobstructed LoS between the two. Querying the Box2D world can be costly, that is why we short-circuit the FoV check with the raycast.</p>
<pre tabindex="0"><code>private void updateVision(Entity observer, Entity observable) {
    if (!inFov(observer, observable)) {
        removeFromVision(observer, observable);
        return;
    }

    raycast(observer, observable);
}
</code></pre><p>To achieve <a href="https://github.com/libgdx/ashley/wiki/How-to-use-Ashley#retrieving-components-with-componentmapper">super-fast component retrieval</a>, we use <code>ComponentMapper</code>.</p>
<pre tabindex="0"><code>private ComponentMapper&lt;ObservableComponent&gt; observableMapper = ComponentMapper.getFor(ObservableComponent.class);
private ComponentMapper&lt;ObserverComponent&gt; observerMapper = ComponentMapper.getFor(ObserverComponent.class);
</code></pre><p>First, check whether the observable is within the vision distance of the observer and if it is, we check whether or not the angle between the two falls within the observer&rsquo;s vision angle. The math is be pretty simple here.</p>
<pre tabindex="0"><code>private boolean inFov(Entity entity, Entity target) {
    ObserverComponent observer = observerMapper.get(entity);
    ObservableComponent observable = observableMapper.get(target);

    if (observer.position.isZero() ||
        observable.position.isZero() ||
        observer.position.dst2(observable.position) &gt;
        observer.distance * observer.distance) {
        return false;
    }

    toObservable.set(observable.position);
    toObservable.sub(observer.position);

    float toObservableAngle = toObservable.angle();
    float angleDifference = Math.abs(toObservableAngle - observer.angle);

    angleDifference = Math.min(angleDifference, 360.0f - angleDifference);

    if (angleDifference &gt; observer.fovAngle) {
        return false;
    }

    return true;
}
</code></pre><p>It&rsquo;s time to perform our raycast, which will go from the observer to the observable. Box2D raycasts take a reference to the <code>Callback</code> interface to handle geometry hits. The handler is notified on every fixture hit. Box2D will pass the fixture it encountered as well as the fraction along the segment at which the hit happened. 
  <img src="../../img/wp/vision-system-raycast.png" alt="vision-system-raycast.png">

 The <code>VisionSystem</code> has an inner <code>VisionCallback</code> implementation, which gets reused for every raycast, that way we don&rsquo;t need to constantly allocate memory.</p>
<pre tabindex="0"><code>private VisionCallback callback = new VisionCallback();
</code></pre><p>Its outline is pretty simple.</p>
<pre tabindex="0"><code>private class VisionCallback implements RayCastCallback {
    private Entity observer;
    private Entity observable;
    private float minFraction;
    private float observableFraction;

    public void prepare(Entity observer, Entity observable) {}
    public boolean canSee() {}

    @Override
    public float reportRayFixture(Fixture fixture, Vector2 point, Vector2 normal, float fraction) {}
}
</code></pre><p>Before the raycast, we need to prepare the callback.</p>
<pre tabindex="0"><code>public void prepare(Entity observer, Entity observable) {
    this.observer = observer;
    this.observable = observable;
    this.minFraction = Float.MAX_VALUE;
    this.observableFraction = Float.MAX_VALUE;
}
</code></pre><p>Whenever the ray hits a fixture, the <code>reportRayFixture()</code> method gets called. Box2D bodies can hold arbitrary data, i.e. a reference to any <code>Object</code>. We conveniently set this to be a referene to the <code>Entity</code> the body belongs to. That way we can check if the fixture we hit is part of the observer itself. Whenever we encounter the observable we record how far along the ray segment it is.</p>
<pre tabindex="0"><code>@Override
public float reportRayFixture(Fixture fixture, Vector2 point, Vector2 normal, float fraction) {
    Object data = fixture.getBody().getUserData();

    if (data == observer) {
        return -1;
    }

    minFraction = fraction;

    if (data == observable) {
        observableFraction = fraction;
        return fraction;
    }
    return 0;
}
</code></pre><p>Thanks to the information recorded during the raycast, we can then ask <code>VisionCallback</code> whether the object is visible. This question is easy to answer, it will be visible if and only if the observable was the closest object the ray bumped into.</p>
<pre tabindex="0"><code>public boolean canSee() {
    return observableFraction &lt; 1.0f &amp;&amp; observableFraction &lt;= minFraction;
}
</code></pre><p>The system <code>raycast()</code> method becomes very simple and can easily update the vision map.</p>
<pre tabindex="0"><code>private void raycast(Entity entity, Entity target) {
    ObserverComponent observer = observerMapper.get(entity);
    ObservableComponent observable = observableMapper.get(target);

    callback.prepare(entity, target);

    world.rayCast(
        callback,
        observer.position,
        observable.position
    );

    if (callback.canSee()) {
        addToVision(entity, target);
    }
    else {
        removeFromVision(entity, target);
    }
}
</code></pre><p>That&rsquo;s it, we have a nice, reusable vision system for any 2D game!</p>
<h3 id="room-for-improvement">Room for improvement</h3>
<p>Like I said, this is game jam code, you have been warned! Here&rsquo;s a few things I could think of to make the system more efficient and nicer in general.</p>
<ul>
<li>Collision filtering: Box2D allows us to set bit masks to bodies to filter collisions. We can leverage that to select behind which bodies observables can hide.</li>
<li>Space partitioning: we can use a <a href="https://en.wikipedia.org/wiki/Quadtree">quadtree</a> to avoid processing every observable for each observer.</li>
<li>Deferred raycasting: we probably don&rsquo;t need one frame accuracy, so we can update the vision maps for a subset of observers each frame. The player won&rsquo;t ever notice if that guard spotted him a couple of frames later.</li>
<li>Prioritisation: if you ever find yourself in a situation where there are just too many observables and observers you can add some sort of prioritisation to your deferred raycast queue, so the important ones get processed first. You may also have to keep track of the time spent in the queue to avoid starvation.</li>
</ul>
<p>Some games may need slightly more complex vision models. For instance, you may add a small detection circle around observers to represent some kind of sixth sense. A guard would notice a presence right behind him after a short while. That would be quite easy to add to our <code>VisionSystem</code>.</p>
<p>
  <img src="../../img/wp/vision-system-alternate-model.png" alt="vision-system-alternate-model.png">

</p>
<h3 id="use-it-improve-it-give-feedback">Use it, improve it, give feedback</h3>
<p>Find the full source for the vision system here:</p>
<ul>
<li><a href="https://github.com/dsaltares/libgdxjam/blob/master/core/src/com/siondream/libgdxjam/ecs/systems/VisionSystem.java"><code>VisionSystem</code></a></li>
<li><a href="https://github.com/dsaltares/libgdxjam/blob/master/core/src/com/siondream/libgdxjam/ecs/components/ObserverComponent.java"><code>ObserverComponent</code></a></li>
<li><a href="https://github.com/dsaltares/libgdxjam/blob/master/core/src/com/siondream/libgdxjam/ecs/components/ObservableComponent.java"><code>ObservableComponent</code></a></li>
</ul>
<p>Let me know what you think, especially if you use it. Would love some feedback on it!</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/projects/sloppynauts-our-libgdxjam-entry/">Sloppynauts, our LibGDXJAM entry</a>
      </h1>
      <span class="post-date">Jan 22, 2016 &middot; 1 minute read &middot; <a href="https://saltares.com/projects/sloppynauts-our-libgdxjam-entry/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/games-development">Games development</a><a class="label" href="../../categories/projects">Projects</a>
      </span>
      
      <p>
  <img src="../../img/wp/sloppynauts-e1453503126584.png" alt="sloppynauts-e1453503126584.png">

</p>
<p>After a <a href="https://github.com/dsaltares/libgdxjam/commits/master">crazy weekend before the deadline</a>, we finally managed to put something playable together for <a href="http://itch.io/jam/libgdxjam">LibGDXJAM</a>.</p>
<p>We&quot;d love you to have a go, and leave some <a href="http://itch.io/jam/libgdxjam/rate/51210">feedback</a>.</p>
<iframe src="https://itch.io/embed/51210" width="100%" frameborder="0"></iframe>
<p>We are definitely aware of the shortcomings of the game. We spent a lot of the jam working on a custom <a href="http://overlap2d.com/">Overlap2D</a> level loader and not so much on actual content, so you can actually finish the game in under a minute. I guess the difficulty (or lack of readability) may make it slightly longer, which is also a bit bad. The movement system could have done with a bit more fine tuning as well.</p>
<p>However, we do believe the game has potential! Thanks to <a href="https://twitter.com/DrillerDev">@DrillerDev</a>, we had great character art an animations. The mechanics offer nice possibilities, which currently remain hidden due to lack of content. Not to mention the humour opportunities and the characters&quot; comicality.</p>
<p>I will try post some technical articles on the project. We used <a href="https://github.com/libgdx/ashley">Ashley</a> and some folks may find interesting how we tackled certain details such as the scene hierarchy or the animation selection system.</p>
<p>
<link rel="stylesheet" href="../../css/hugo-easy-gallery.css" />

<div class="gallery caption-position-bottom caption-effect-slide hover-effect-zoom hover-transition" itemscope itemtype="http://schema.org/ImageGallery">
				<div class="box">
				  <figure itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
				    <div class="img" style="background-image: url('https://saltares.com/img/sloppynauts/gallery/sloppynauts-1.png');" >
				      <img itemprop="thumbnail" src="https://saltares.com/img/sloppynauts/gallery/sloppynauts-1.png" alt="Sloppynauts 1" />
				    </div>
			      <figcaption>
		          <p>Sloppynauts 1</p>
			      </figcaption>
				    <a href="https://saltares.com/img/sloppynauts/gallery/sloppynauts-1.png" itemprop="contentUrl"></a>
				  </figure>
				</div>
				<div class="box">
				  <figure itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
				    <div class="img" style="background-image: url('https://saltares.com/img/sloppynauts/gallery/sloppynauts-2.png');" >
				      <img itemprop="thumbnail" src="https://saltares.com/img/sloppynauts/gallery/sloppynauts-2.png" alt="Sloppynauts 2" />
				    </div>
			      <figcaption>
		          <p>Sloppynauts 2</p>
			      </figcaption>
				    <a href="https://saltares.com/img/sloppynauts/gallery/sloppynauts-2.png" itemprop="contentUrl"></a>
				  </figure>
				</div>
				<div class="box">
				  <figure itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
				    <div class="img" style="background-image: url('https://saltares.com/img/sloppynauts/gallery/sloppynauts-3.png');" >
				      <img itemprop="thumbnail" src="https://saltares.com/img/sloppynauts/gallery/sloppynauts-3.png" alt="Sloppynauts 3" />
				    </div>
			      <figcaption>
		          <p>Sloppynauts 3</p>
			      </figcaption>
				    <a href="https://saltares.com/img/sloppynauts/gallery/sloppynauts-3.png" itemprop="contentUrl"></a>
				  </figure>
				</div>
				<div class="box">
				  <figure itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
				    <div class="img" style="background-image: url('https://saltares.com/img/sloppynauts/gallery/sloppynauts-4.png');" >
				      <img itemprop="thumbnail" src="https://saltares.com/img/sloppynauts/gallery/sloppynauts-4.png" alt="Sloppynauts 4" />
				    </div>
			      <figcaption>
		          <p>Sloppynauts 4</p>
			      </figcaption>
				    <a href="https://saltares.com/img/sloppynauts/gallery/sloppynauts-4.png" itemprop="contentUrl"></a>
				  </figure>
				</div>
</div>





  





<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>
</p>
<p>Next time we should follow the advice <a href="https://twitter.com/McFunkypants">@McFunkypants</a> gives in <a href="https://www.packtpub.com/game-development/game-jam-survival-guide">The Game Jam Survival Guide</a>!</p>

      
    </div>
    
        <div class=pagination>
        <ul class="pagination">
            <li>
                <a href="../../">««</a>
            </li>
            
            <li>
                <a href="../../page/6/">«</a>
            </li>
            
            <li class="active">
                <a href="../../page/7/">7</a>
            </li>
            
            <li>
                <a href="../../page/8/">»</a>
            </li>
            
            <li>
                <a href="../../page/64/">»»</a>
            </li>
        </ul>
    </div>
  </div>
</div>


<script type="text/javascript">
var disqus_shortname = "siondream";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>


<script src="../../js/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
<script src="../../js/load-photoswipe.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
</body>
</html>

