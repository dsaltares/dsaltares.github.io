<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.94.2" />
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>David Saltares &middot; Engineering Leadership &amp; Software Development</title>

  
  <link rel="stylesheet" href="../../css/poole.css">
  <link rel="stylesheet" href="../../css/hyde.css">
  <link rel="stylesheet" href="../../css/poole-overrides.css">
  <link rel="stylesheet" href="../../css/hyde-overrides.css">
  <link rel="stylesheet" href="../../css/hyde-x.css">
  <link rel="stylesheet" href="../../css/highlight/github-dark-dimmed.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../touch-icon-144-precomposed.png">
  <link href="../../img/favicon.png" rel="icon">

  
  
  
  <link href="%7balternate%20%7bRSS%20application/rss&#43;xml%20%20index%20alternate%20%20false%20false%20true%20false%20false%200%7d%20/index.xml%20https://saltares.com/index.xml%7d" rel="alternate" type="application/rss+xml" title="David Saltares &middot; David Saltares" />

  <meta name="description" content="I am David and I write about engineering leadership, remote teams, software development and games development.">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-4440744-3', 'auto');
    ga('send', 'pageview');
  </script>
  

  

  
  <link rel="canonical" href="https://saltares.com/" itemprop="url" />
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="../../"><img src="../../img/profile.jpg"
             alt="profile-picture" id="profile-img" title="David Saltares"></a>
      <h1><a href="../../">David Saltares</a></h1>
      <p class="lead">Engineering Leadership &amp; Software Development</p>
      <div class="subscribe"><a href="https://tinyletter.com/dsaltares/">✉️ Subscribe</a></div>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="../../">Blog</a></li>
      
      <li class="sidebar-nav-item"><a href="../../about">About</a></li>
      
      <li class="sidebar-nav-item"><a href="../../apps-tools">Apps &amp; Tools</a></li>
      
      <li class="sidebar-nav-item"><a href="../../game-jams">Game Jams</a></li>
      
      <li class="sidebar-nav-item"><a href="../../games">Games</a></li>
      
      <li class="sidebar-nav-item"><a href="../../libgdx-cross-platform-game-development-cookbook">Libgdx Cookbook</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a aria-label="Github profile" href="http://github.com/dsaltares"><i class="fa fa-github-square fa-2x"></i></a>
      
      
      <a aria-label="LinkedIn profile" href="https://www.linkedin.com/in/davidsaltares"><i class="fa fa-linkedin-square fa-2x"></i></a>
      
      
      <a aria-label="Twitter profile" href="http://twitter.com/d_saltares"><i class="fa fa-twitter-square fa-2x"></i></a>
      
      <a aria-label="RSS" href="../../index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-2x"></i></a>
      </li>
    </ul>

    

    <div class="copyright">
      <p>&copy; 2022 David Saltares.</p>
    </div>
  </div>
</div>


<div class="content container">
  <div class="posts">
    
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/games/fixing-your-timestep-in-libgdx-and-box2d/">Fix your timestep in Libgdx and Box2D</a>
      </h1>
      <span class="post-date">Mar 11, 2014 &middot; 4 minute read &middot; <a href="https://saltares.com/games/fixing-your-timestep-in-libgdx-and-box2d/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/games-development">Games development</a>
      </span>
      
      <p><em><a href="http://gafferongames.com/game-physics/fix-your-timestep/">Fix your Timestep</a></em> is a fantastic article by Glenn Fiedler that explains the different ways to tick a physics simulation. Show some self-respect, go read it and check some of his other articles on physics and network code. Some might be 8 years old but still totally relevant.</p>
<p>Essentially, it covers different approaches to pick a delta value to pass through to the physics engine along their strengths and weaknesses. The topic is complex but has an undeniable impact on games&rsquo; behaviour.</p>
<p>I thought it would be a good idea to show how it translates to a <a href="https://github.com/libgdx/libgdx">Libgdx</a> application using the <a href="http://box2d.org/">Box2D</a> physics engine. Note that it also applies to <a href="http://bulletphysics.org/wordpress/">Bullet</a>, changes would be minimal.</p>
<h3 id="simple-but-wrong-approaches">Simple but wrong approaches</h3>
<p>It starts with a fix time step of 1/60th of a second, which makes for a stable simulation but fails terribly when the game runs at less than 60fps, a very common situation in mobile devices.</p>
<p>The logical upgrade is to pass exactly how much time has passed since the last frame. Obviously, not every frame takes the same, which means the simulation could be unstable. Moreover, it will vary across devices as they can feature a wide range of specifications. This is definitely not the way to go.</p>
<blockquote>
<p>Everything is lost!</p>
</blockquote>
<h3 id="fixed-timestep">Fixed timestep</h3>
<p>If only we had the best of both worlds! A fixed timestep and a mechanism that caters for the render loop being too slow. As the article explains, the physics will always be stepped by a fixed amount, let&rsquo;s say 1/60s. Some machines may be too fast and render at 120fps, so we can run the physics twice. However, others might be too slow and render at 30fps, in which case we&rsquo;d only step the physics one every two frames.</p>
<blockquote>
<p>What happens when the game runs at 50fps?</p>
</blockquote>
<p>We need an <code>accumulator</code> where we can put the time spent by the renderer. Then we step the physics by a fixed amount until they sync as best as possible. There might be still be some time left, but we can save it for the next frame.</p>
<pre tabindex="0"><code>public class SionGame extends ApplicationListener {
    private World world;
    private double accumulator;
    private double currentTime;
    private float step = 1.0f / 60.0f;

    public void render() {
        double newTime = TimeUtils.millis() / 1000.0;
        double frameTime = Math.min(newTime - currentTime, 0.25);
        float deltaTime = (float)frameTime;

        currentTime = newTime;

        while (accumulator &amp;gt;= step) {
            world.step(step, velIterations, posIterations);
            accumulator -= step;
        }
}
</code></pre><h3 id="fixed-timestep-with-interpolation">Fixed timestep with interpolation</h3>
<p>The <code>accumulator &lt;= step</code> condition in the <code>while</code> loop means we can still have some time left in the accumulator but not enough to step the physics at 1/60s. This results in some visual stuttering, as the physics can get slightly out of sync for a while. Glenn Fiedler&rsquo;s suggests we interpolate our entities&rsquo; transforms between the previous and current physics state based on how much time left is in the accumulator.</p>
<pre tabindex="0"><code>public class SionGame extends ApplicationListener {
    private World world;
    private double accumulator;
    private double currentTime;
    private float step = 1.0f / 60.0f;

    public void render() {
        double newTime = TimeUtils.millis() / 1000.0;
        double frameTime = Math.min(newTime - currentTime, 0.25);
        float deltaTime = (float)frameTime;

        currentTime = newTime;

        while (accumulator &amp;gt;= step) {
            world.step(step, velIterations, posIterations);
            accumulator -= step;
            entityManager.update();
        }

        entityManager.interpolate(accumulator / step);
}
</code></pre><p>I entirely made <code>EntityManager</code> up, it simply should maintain a collection of your game entities. We assume <code>entityManager.update()</code> iterates over the list of game entities and updates their position and rotation according to the current physics state. On the other hand, <code>entityManager.interpolate()</code> should do something like the following.</p>
<pre tabindex="0"><code>public void interpolate(float alpha) {
    for (Entity entity : entities) {
        Transform transform = entity.getBody().getTransform();
        Vector2 bodyPosition = transform.getPosition();
        Vector2 position = entity.getPosition();
        float angle = entity.getAngle();
        float bodyAngle = transform.getRotation();

        position.x = bodyPosition.x * alpha + position.x * (1.0f - alpha);
        position.y = bodyPosition.y * alpha + position.x * (1.0f - alpha);
        entity.setAngle(bodyAngle * alpha + angle * (1.0f - alpha));
    }
}
</code></pre><p>Although it&rsquo;s been simplified for the purpose of this text, the following snippet comes from <a href="https://github.com/siondream/sioncore">SionCore</a>.</p>
<h3 id="a-working-sample">A working sample</h3>
<p>Libgdx community memeber, Just4phil, pointed out in the comments the advantages of using a fixed timestep with interpolation. He kindly provided a working sample that lets you switch between all approaches explained in this article. Not only that, he also linked to the source, which is really awesome. Kudos.</p>
<p>
  <img src="../../img/wp/just4phil-fixed-timestep.png" alt="Fixed timestep demo">

</p>
<ul>
<li><a href="http://goo.gl/aF0wSJ">Download demo jar</a></li>
<li><a href="https://github.com/just4phil/bubblr3_00.010a/blob/master/bubblr3/src/de/philweb/bubblr3/GameScreen.java">Fixed timestep code</a></li>
<li><a href="https://github.com/just4phil/bubblr3_00.010a/blob/master/bubblr3/src/de/philweb/bubblr3/GameObjectManager.java">Interpolation code</a></li>
</ul>
<p>Again, read <a href="http://gafferongames.com/game-physics/fix-your-timestep/">the original article</a> if you haven&rsquo;t done so already.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/games/sioncore-a-small-game-engine/">SionCore, a small game engine</a>
      </h1>
      <span class="post-date">Mar 10, 2014 &middot; 2 minute read &middot; <a href="https://saltares.com/games/sioncore-a-small-game-engine/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/games-development">Games development</a>
      </span>
      
      <p>Today I created a repository on Gihub to keep track of my code base and I named it <a href="https://github.com/dsaltares/sioncore">SionCore</a>. This wasn&rsquo;t made overnight, it&rsquo;s the result of several small game projects, such as game jam gigs and <a href="../../games/math-maze/">Math Maze</a>.</p>
<p>Slowly, it became obvious that some components were highly reusable and game agnostic. That is why I thought it would be good to make it public.</p>
<p>Who knows, maybe someday someone might even contribute!</p>
<p>This small <em>game engine</em> is built on top of <a href="https://github.com/libgdx/libgdx">Libgdx</a> and <a href="https://github.com/stbachmann/ashley">Ashley</a> among others and it&rsquo;s compatible with desktop, Android and iOS platforms.</p>
<h3 id="disclaimer">Disclaimer</h3>
<p>SionCore is currently under heavy development, so expect constant API changes and a good deal of instability. Hopefully this one will last longer than my poorly executed previous attempts and will stabilise in a while. If that&rsquo;s what floats your boat, you&rsquo;re more than welcome on board.</p>
<p>Regardless of whether you use the whole thing or grab specific ideas, feedback is more than welcome.</p>
<h3 id="features">Features</h3>
<p>Currently implemented and working.</p>
<ul>
<li>Data driven entities</li>
<li>Entity components and system collection: rendering, animation, physics.</li>
<li>Localisation with automatic generation of template CSV files.</li>
<li>Easy screen management</li>
<li>Config files</li>
<li>Data driven sprites</li>
<li>Data driven physics</li>
<li>Grouped asset management</li>
<li>Basic state machine implementation</li>
<li>Populate your Box2D world from map data</li>
<li>Spine integration</li>
<li>Multiple aspect ratio support</li>
</ul>
<h3 id="dependencies">Dependencies</h3>
<p>As of now, all the <code>.jar</code> files SionCore needs are included in the repository. However, switching to Gradle or Maven is something I want to get out of the way sooner rather than later.</p>
<h3 id="contributing">Contributing</h3>
<p>If you find a bug or would like a particular feature, please <a href="https://github.com/dsaltares/sioncore/issues">open an issue</a>. On the other hand, if you want to get more involved, clone the repository and open a <a href="https://github.com/dsaltares/sioncore/pulls">pull request</a>!</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/computing/using-ant-behind-a-proxy/">Using Ant behind a proxy</a>
      </h1>
      <span class="post-date">Mar 10, 2014 &middot; 1 minute read &middot; <a href="https://saltares.com/computing/using-ant-behind-a-proxy/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/computing">Computing</a>
      </span>
      
      <p>Many Java projects use <a href="http://en.wikipedia.org/wiki/Apache_Ant">Ant</a> to automate their build process. Libgdx, for instance, is among them. One could possibly say Ant is the Java version of Make. Targets, dependencies and other settings are defined in XML scripts.</p>
<p>Downloading dependencies while your machine is behind a proxy might prove problematic. Luckily enough, you can specify your proxy settings inside the Ant script.</p>
<pre tabindex="0"><code>&lt;setproxy proxyhost=&#34;host&#34; proxyport=&#34;port&#34; proxypassword=&#34;password&#34;/&gt;
</code></pre><p>Users behind a proxy would now be able to download dependencies with Ant. More documentation about the <code>setproxy</code> task is available inside the <a href="https://ant.apache.org/manual/Tasks/setproxy.html">official user manual</a>.</p>
<p>This comes from me trying to get the Libgdx development environment in my office&rsquo;s desktop. We obviously have a proxy, which put this little bump on the road.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/general/new-look/">New look</a>
      </h1>
      <span class="post-date">Mar 9, 2014 &middot; 1 minute read &middot; <a href="https://saltares.com/general/new-look/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/general">General</a>
      </span>
      
      <p>Let&rsquo;s face it, the old theme was extremely 2005. It was about time this blog got a proper facelift.</p>
<p>Since I&rsquo;m no designer, I put together all my creativity and went for one of the featured WordPress themes, <a href="http://wordpress.org/themes/twentythirteen">Twenty Thirteen</a>. But that&rsquo;s okay because the awesomeness of my content makes up for the lack of innovation.</p>
<blockquote>
<p>Ha!</p>
</blockquote>
<p>Now seriously, I thought a colorful and yet simple style would do this place some good. Twenty Thirteen is modern, slick and clean. The mobile version works really well too! It might not be the most glorious display of originality but I like it and that&rsquo;s all that really matters. Of course, I hope whoever reads this doesn&rsquo;t find it too unpleasant.</p>
<p>For a while, I even considered divorcing WordPress entirely and go for something more minimalistic such as <a href="http://jekyllrb.com/">Jekyll</a> or <a href="https://ghost.org/">Ghost</a>. However, when I looked into the actual setup, I decided I couldn&rsquo;t be bothered. Simplicity is beautiful and WordPress is kind of a Behemoth. A monster that works and makes my life easy, nonetheless.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="https://saltares.com/computing/smart-enums-in-c-or-what-is-this-madness/">Smart enums in C&#43;&#43; or: &#34;what is this madness?&#34;</a>
      </h1>
      <span class="post-date">Feb 9, 2014 &middot; 5 minute read &middot; <a href="https://saltares.com/computing/smart-enums-in-c-or-what-is-this-madness/#disqus_thread">Comments</a>
      
      <br/>
      <a class="label" href="../../categories/computing">Computing</a>
      </span>
      
      <p>Needless to say, <strong>C++ is a glorious language</strong>. Sadly, the attention it gets on the blog is far from representative of my appreciation towards it. Despite it being my main language at work, I only tend to talk about <a href="../../tag/libgdx/">Libgdx</a> side projects around here. Well, enough is enough!</p>
<p>Truth be told, over the years, standard after standard, C++ has become a behemoth of a language. As <a href="https://www.google.co.uk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;ved=0CC8QFjAA&amp;url=http%3A%2F%2Fwww.amazon.co.uk%2FEffective-Specific-Addison-Wesley-Professional-Computing%2Fdp%2F0201924889&amp;ei=T9X3UoS5Ec7y7AaS5IDQDA&amp;usg=AFQjCNFQ9GOAfduwPXXh4k9gzib3-djOTg&amp;sig2=JutKpkkTKO8YMXdtaGgZmA&amp;bvm=bv.60983673,d.ZGU">Scott Meyers</a> likes to say, it&rsquo;s actually a set of languages.</p>
<ul>
<li>C with classes.</li>
<li>C with classes and the STL.</li>
<li>All of the above and templates.</li>
</ul>
<p>One of the beauties of C++ is that I can always learn something new about it, which almost makes up for its ever growing syntax complexity.</p>
<h3 id="lets-talk-macros">Let&rsquo;s talk macros</h3>
<p>Let&rsquo;s talk about macros. Everyone knows about the <a href="www.cplusplus.com/doc/tutorial/preprocessor/">preprocessor</a> and the basic usage of macros, right?</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">#define PI 3.14
#define SQR(x) x * x</pre>
<p>Actually, let&rsquo;s talk about macros that take other macros as arguments.</p>
<blockquote>
<p>Sorry what?</p>
</blockquote>
<h3 id="the-problem">The problem</h3>
<p>Let us imagine we define the following perfectly standard enum to represent kinds of animals in a farm.</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">enum Animal
{
    eAnimal_Dog,
    eAnimal_Cat,
    eAnimal_Cow,
    eAnimal_Count,
};</pre>
<p>Our application can request a server a list of animals a given farm has. The server sends the animal names as strings, so we need to convert them to enum values. Alright, let&rsquo;s define a function to do that.</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">Animal getAnimalFromString(const char* str)
{
    if (!strcmp(str, "Dog")) return eAnimal_Dog;
    if (!strcmp(str, "Cat")) return eAnimal_Cat;
    if (!strcmp(str, "Cow")) return eAnimal_Cow;
    return eAnimal_Count;
}</pre>
<p>Err… That is not the most elegant piece of code you&rsquo;ve ever seen, is it? We also might have to convert from an enum value to a string literal in case we want to send a report back to the server.</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">const char* getStringFromAnimal(Animal animal)
{
    switch (animal)
    {
    case eAnimal_Dog: return "Dog";
    case eAnimal_Cat: return "Cat";
    case eAnimal_Cow: return "Cow";
    default: return "None";
    }
}</pre>
<p>That was horrendous enough, but just the thought of adding new species to the catalogue makes me shiver badly. Why not simply use strings to represent animal species? Enums are nice because they heavily reduce the domain of values a variable can have and prevent us from making silly typos everywhere.</p>
<blockquote>
<p>There must be a better solution.</p>
</blockquote>
<h3 id="higher-order-macros">Higher order macros</h3>
<p>To make things nicer, we&rsquo;d need some sort of compile time mechanism that traverses the list of enum values generating the time consuming boilerplate code for us.</p>
<blockquote>
<p>The preprocessor!</p>
</blockquote>
<p>Take a look at this way of defining our list of animals.</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">#define ANIMAL_LIST(m)   \
    m(Animal, Dog)  \
    m(Animal, Cat)  \
    m(Animal, Cow)</pre>
<p><code>_ANIMAL_LIST_</code> is a higher order macro that takes a macro m as a parameter. Then it passes each one of our animal species to m.</p>
<p>The previous macro is not really useful by itself. Let&rsquo;s make things slightly more interesting</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">#define SMARTENUM_VALUE(typeName, value) e##typeName##_##value,
#define SMARTENUM_DEFINE_ENUM(typeName, values) enum typeName { values(SMARTENUM_VALUE) e##typeName##_Count, };</pre>
<p><code>SMARTENUM_DEFINE_ENUM</code> takes the enum name and the list of values as parameters and defines an enum for us. It also appends the total count.</p>
<p style="padding-left: 30px;">
  <strong>Note</strong>: ## is used by the preprocessor to concatenate parameters with other pieces of text.
</p>
<p>When we write</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">SMARTENUM_DEFINE_ENUM(Animal, ANIMAL_LIST)</pre>
<p>The preprocessor expands it to</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">enum Animal { eAnimal_Dog, eAnimal_Cat, eAnimal_Cow, eAnimal_Count };</pre>
<p>Okay, that was a lot of gibber jabber for very little gain.</p>
<p>Hang on a minute, we can go further. Let&rsquo;s write a small mechanism to convert an enum value to a string literal.</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">#define SMARTENUM_STRING(typeName, value) #value,
#define SMARTENUM_DEFINE_NAMES(typeName, values) const char* typeName##Array [] = { values(SMARTENUM_STRING) };
#define getStringFromEnumValue(typeName, value) typeName##Array[##value]</pre>
<p><code>SMARTENUM_DEFINE_NAMES</code> takes an enum type and the list of values and generates an array with the string representations of our list values. Interestingly enough, the values in the array map directly to those of the enum. This allows us to write the third macro, which accesses the array at the right position to return the corresponding string literal for a given enum value.</p>
<p style="padding-left: 30px;">
  <strong>Note</strong>: # is used by the preprocessor to convert a piece of text in a string literal.
</p>
<p>When we write</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">SMARTENUM_DEFINE_NAMES(Animal, ANIMAL_LIST)</pre>
<p>The preprocessor expands it to</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">const char* AnimalArray [] = { "Dog", "Cat", "Cow"}</pre>
<p>So</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">const char* animalName = getStringFromEnumValue(Animal, eAnimal_Cow);</pre>
<p>Will result in</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">const char* animalName = "Cow";</pre>
<p>Aha!</p>
<p>Getting an enum value from a string literal is slightly trickier but still achievable. We&rsquo;ve come this far, so it&rsquo;d be a shame not to finish the job.</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">#define SMARTENUM_DEFINE_GET_VALUE_FROM_STRING(typeName, name)       \
    typeName get##typeName##FromString(const char* str)     \
    {                               \
        for (int i = 0; i &lt; e##typeName##_Count; ++i)    \
            if (!strcmp(##typeName##Array[i], str))     \
                return (##typeName##)i;         \
        return e##typeName##_Count;             \
    }

#define getEnumValueFromString(typeName, name)  get##typeName##FromString(##name)</pre>
<p>The first abomination generates a function that iterates over the previously defined array of names doing string comparisons until it finds the desired enum value. The second one is nothing more than a convenience macro to spare the user from remembering the preprocessor generated function name.</p>
<p>Now if we do</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">SMARTENUM_DEFINE_GET_VALUE_FROM_STRING(Animal, ANIMAL_LIST)</pre>
<p>We can simply go</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">Animal animal = getEnumValueFromString(Animal, animalname);</pre>
<p>Neat, isn&rsquo;t it?</p>
<h3 id="for-future-references">For future references</h3>
<p>Now, every time we want to define an enum type that we need to convert to and from strings we&rsquo;ll be lucky to be able to do the following.</p>
<pre class="prettyprint lang-cpp linenumstrigger linenums">#define CAR_LIST(m)  \
    m(Car, Fiat)    \
    m(Car, Ford)    \
    m(Car, Audi)

SMARTENUM_DEFINE_ENUM(Car, CAR_LIST)
SMARTENUM_DEFINE_NAMES(Car, CAR_LIST)
SMARTENUM_DEFINE_GET_VALUE_FROM_STRING(Car, CAR_LIST)</pre>
<p>Voilà!</p>
<p>Admittedly, using macros like this doesn&rsquo;t make for readable code and sometimes results in debugging complications. However, I&rsquo;ve been able to debug my code normally in Visual Studio 2012 when using similar macros.</p>
<p>String conversion of enums is just the tip of the iceberg, this approach can be used to generate all sorts of repetitive boilerplate code.</p>
<h3 id="download-it">Download it</h3>
<p>In case you are interested, <a href="https://gist.github.com/dsaltares/8904478">SmartEnums.h</a> is available as a GitHub gist.</p>
<p style="padding-left: 30px;">
  <strong>Note</strong>: this post was inspired by the article <a href="http://journal.stuffwithstuff.com/2012/01/24/higher-order-macros-in-c/">Higher Order Macros in C++</a>
</p>

      
    </div>
    
        <div class=pagination>
        <ul class="pagination">
            <li>
                <a href="../../">««</a>
            </li>
            
            <li>
                <a href="../../page/17/">«</a>
            </li>
            
            <li class="active">
                <a href="../../page/18/">18</a>
            </li>
            
            <li>
                <a href="../../page/19/">»</a>
            </li>
            
            <li>
                <a href="../../page/63/">»»</a>
            </li>
        </ul>
    </div>
  </div>
</div>


<script type="text/javascript">
var disqus_shortname = "siondream";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>


<script src="../../js/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
<script src="../../js/load-photoswipe.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
</body>
</html>

