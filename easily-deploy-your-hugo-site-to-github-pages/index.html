<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/touch-icon-144-precomposed.png"/><title>Easily deploy your Hugo site to Github Pages · David Saltares</title><meta name="robots" content="index,follow"/><meta name="description" content="Engineering Leadership &amp; Software Development"/><meta property="og:title" content="Easily deploy your Hugo site to Github Pages · David Saltares"/><meta property="og:description" content="Engineering Leadership &amp; Software Development"/><meta property="og:url" content="https://saltares.com/easily-deploy-your-hugo-site-to-github-pages"/><meta property="og:type" content="website"/><link rel="canonical" href="https://saltares.com/easily-deploy-your-hugo-site-to-github-pages"/><meta name="keywords" content=""/><meta name="next-head-count" content="12"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/592216306eff0874.css" as="style"/><link rel="stylesheet" href="/_next/static/css/592216306eff0874.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-59abf025137dee37.js" defer=""></script><script src="/_next/static/chunks/framework-9b5d6ec4444c80fa.js" defer=""></script><script src="/_next/static/chunks/main-e42aac98337d61c6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-89283805d41ea493.js" defer=""></script><script src="/_next/static/chunks/c16184b3-9b756f0214555638.js" defer=""></script><script src="/_next/static/chunks/2cca2479-c0f2c9f2f2dc1702.js" defer=""></script><script src="/_next/static/chunks/252-64d0c1a5eecbfabd.js" defer=""></script><script src="/_next/static/chunks/167-7d296999b3b0013a.js" defer=""></script><script src="/_next/static/chunks/962-68c39fb6207889be.js" defer=""></script><script src="/_next/static/chunks/673-8982310ab2fdaad5.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-73432d84cbff39d9.js" defer=""></script><script src="/_next/static/o3N7RC9DYMmzFV4fxvsi1/_buildManifest.js" defer=""></script><script src="/_next/static/o3N7RC9DYMmzFV4fxvsi1/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap">@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizaRExUiTo99u79P0Y.woff) format('woff')}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizfRExUiTo99u79B_mh4Oo.woff) format('woff')}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizaRExUiTo99u79D0-ExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizaRExUiTo99u79D0aExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizaRExUiTo99u79D0yExcOPIDUg-g.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizaRExUiTo99u79D0KExcOPIDU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizfRExUiTo99u79B_mh0OOtLR8a8zILig.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizfRExUiTo99u79B_mh0OqtLR8a8zILig.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizfRExUiTo99u79B_mh0OCtLR8a8zILig.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ptsans/v17/jizfRExUiTo99u79B_mh0O6tLR8a8zI.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="flex flex-col md:flex-row font-sans text-xl w-full"><aside class="md:max-w-[360px] bg-primary px-10 py-10 text-white text-xl md:fixed md:top-0 md:left-0 md:h-full flex flex-col justify-end items-center md:items-start"><div><a href="/"><div class="mb-5"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27200%27%20height=%27200%27/%3e"/></span><img alt="profile picture" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="profile picture" src="/img/profile.webp" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full" loading="lazy"/></noscript></span></div><h1 class="text-white font-bold text-4xl leading-10">David Saltares</h1></a></div><p class="text-contentLight text-2xl mb-5 leading-9 text-center md:text-left">Engineering Leadership &amp; Software Development</p><a href="https://tinyletter.com/dsaltares/"><p class="mb-5">✉️ Subscribe</p></a><nav><ul class="mb-5 flex flex-col items-center md:items-start list-none pl-0"><li class="leading-7"><a href="/">Blog</a></li><li class="leading-7"><a href="/about-me/">About</a></li><li class="leading-7"><a href="/apps-tools/">Apps &amp; Tools</a></li><li class="leading-7"><a href="/game-jams/">Game Jams</a></li><li class="leading-7"><a href="/games/">Games</a></li><li class="leading-7"><a href="/libgdx-cross-platform-game-development-cookbook/">Libgdx Cookbook</a></li></ul></nav><ul class="mb-5 list-none pl-0"><li class="inline"><a aria-label="Github profile" href="https://github.com/dsaltares"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="square-github" class="svg-inline--fa fa-square-github text-4xl mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></path></svg></a></li><li class="inline"><a aria-label="Linkedin profile" href="https://www.linkedin.com/in/davidsaltares/"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin text-4xl mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li class="inline"><a aria-label="Twitter profile" href="https://twitter.com/dsaltares"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="square-twitter" class="svg-inline--fa fa-square-twitter text-4xl mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg></a></li><li class="inline"><a aria-label="RSS feed" href="https://saltares.com/index.xml"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="square-rss" class="svg-inline--fa fa-square-rss text-4xl mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM96 136c0-13.3 10.7-24 24-24c137 0 248 111 248 248c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200c-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24c83.9 0 152 68.1 152 152c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104c-13.3 0-24-10.7-24-24zm64 120c0 17.7-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32z"></path></svg></a></li><li class="inline"><a rel="me" href="https://fosstodon.org/@dsaltares"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="mastodon" class="svg-inline--fa fa-mastodon text-4xl mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"></path></svg></a></li></ul><p class="text-contentLight text-lg">© 2023 David Saltares.</p></aside><div class="md:max-w-[360px] w-full hidden md:block flex-grow-0 flex-shrink-0"></div><div class="flex flex-col main-content"><main class="w-full max-w-[720px] pr-4 py-10 pl-5 md:py-20 md:pl-20"><article class="text-content mb-10"><div><a href="/easily-deploy-your-hugo-site-to-github-pages/"><h1 class="font-bold text-4xl mb-2 text-primary">Easily deploy your Hugo site to Github Pages</h1></a><p class="flex text-contentLight mb-1">Jan 17 2020 · 4 min read<span> · </span><a class="text-contentLink" href="/easily-deploy-your-hugo-site-to-github-pages/#disqus_thread">Comments</a></p><div class="mb-3"><div class="flex flex-row gap-1"><a class="px-2 py-1 bg-slate-900 text-white rounded font-bold text-sm" href="/categories/general/">General</a></div></div></div><p>I had been using a <a class="text-contentLink text-xl" href="https://www.digitalocean.com/products/droplets/">DigitalOcean</a> droplet to host this blog and personal projects for years. But... Do I really need to spend the $6/month? It&#x27;s just a static <a class="text-contentLink text-xl" href="https://gohugo.io/">Hugo</a> site, which <a class="text-contentLink text-xl" href="https://pages.github.com/">Github pages</a> can do for free. Game hosting on <a class="text-contentLink text-xl" href="https://david-saltares.itch.io/">itch.io</a> is also free, it even gives you a mechanism to embed your web games. Looks like I&#x27;d be sorted!</p>
<p>Here&#x27;s a simple CD workflow for deploying a Huge site to Github pages.</p>
<h3>Setup your production Github pages repo</h3>
<p>Create a Github repo with the name <code class="text-code bg-codeBg px-2 py-1 text-base rounded">&lt;username&gt;.github.io</code>. Make sure it has a <code class="text-code bg-codeBg px-2 py-1 text-base rounded">README.md</code> so that you can start pushing to it. Anything pushed to this repo will be accessible from <code class="text-code bg-codeBg px-2 py-1 text-base rounded">http://&lt;username&gt;.github.io</code>. This will be your production repository. If you have a PRO Github account, you can make the repo private. This means users will be able to access the <code class="text-code bg-codeBg px-2 py-1 text-base rounded">github.io</code> site but not the repo sources.</p>
<img class="mb-1" src="/img/gh-pages-workflow/production-repo.webp" alt="dsaltares.github.io"/>
<h3>Create your dev repository</h3>
<p>Create a new repo to host your dev Hugo site from which we will deploy to the production repo. Name it something like <code class="text-code bg-codeBg px-2 py-1 text-base rounded">&lt;username&gt;.github.io-dev</code>. That&#x27;s where you will write your Hugo pages in Markdown.</p>
<img class="mb-1" src="/img/gh-pages-workflow/dev-repo.webp" alt="dsaltares.github.io-dev"/>
<h3>Configure the CD pipeline</h3>
<p>Whenever we push to our dev repo, we will build the site and deploy it to the production repo. For that, we will leverage <a class="text-contentLink text-xl" href="https://github.com/features/actions">Github Actions</a>. For the dev repo to publish to the production repo, we need them to exchange keys.</p>
<p>Generate a public/private key pair.</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ssh-keygen -t rsa -b 4096 -C &amp;quot;&amp;lt;email&amp;gt;&amp;quot; -f publish_key -P &amp;quot;&amp;quot;</code></pre></div>
<p>Now, go to the production repo Settings, Deploy keys and paste the contents of <code class="text-code bg-codeBg px-2 py-1 text-base rounded">publish_key.pub</code> here.</p>
<img class="mb-1" src="/img/gh-pages-workflow/deploy-keys.webp" alt="deploy_keys"/>
<p>Go to the dev repo Settings, Secrets and add a new secret called <code class="text-code bg-codeBg px-2 py-1 text-base rounded">ACTIONS_DEPLOY_KEY</code> with the contents of the <code class="text-code bg-codeBg px-2 py-1 text-base rounded">publish_key</code> file.</p>
<img class="mb-1" src="/img/gh-pages-workflow/secrets.webp" alt="secrets"/>
<p>Create a <code class="text-code bg-codeBg px-2 py-1 text-base rounded">.github/workflows/deploy.yml</code> file in your dev repo with the following contents:</p>
<div class="remark-highlight"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Build and deploy

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> master

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v1
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Hugo
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>hugo@v2
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
        <span class="token key atrule">run</span><span class="token punctuation">:</span> hugo
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v2
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">EXTERNAL_REPOSITORY</span><span class="token punctuation">:</span> &lt;username<span class="token punctuation">&gt;</span>/&lt;repository<span class="token punctuation">&gt;</span>.github.io
          <span class="token key atrule">ACTIONS_DEPLOY_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACTIONS_DEPLOY_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">PUBLISH_BRANCH</span><span class="token punctuation">:</span> master
          <span class="token key atrule">PUBLISH_DIR</span><span class="token punctuation">:</span> ./public
</code></pre></div>
<p>After you push this file and every time you push to dev, the <code class="text-code bg-codeBg px-2 py-1 text-base rounded">Build and Deploy</code> action will be triggered. It will checkout the dev repo, install the latest Hugo binary, build your site and deploy to the master branch of your production repo. Once it&#x27;s done, the latest version of your site will be available on <code class="text-code bg-codeBg px-2 py-1 text-base rounded">https://&lt;username&gt;.github.io</code>.</p>
<img class="mb-1" src="/img/gh-pages-workflow/actions.webp" alt="actions"/>
<p>Even though my blog contains hundreds of posts, images and files, <code class="text-code bg-codeBg px-2 py-1 text-base rounded">Build and Deploy</code> takes less than 1 minute!</p>
<h3>Make your domain point to your Github Pages</h3>
<p>Obviously, this step only applies if you have your own domain. Go to your provider&#x27;s admin panel and change your domain&#x27;s DNS records.</p>
<ul>
<li>Enter 4 <code class="text-code bg-codeBg px-2 py-1 text-base rounded">A</code> records with <code class="text-code bg-codeBg px-2 py-1 text-base rounded">@</code> hosts and the Github Pages IPs:<!-- -->
<ul>
<li><code class="text-code bg-codeBg px-2 py-1 text-base rounded">185.199.108.153</code></li>
<li><code class="text-code bg-codeBg px-2 py-1 text-base rounded">185.199.109.153</code></li>
<li><code class="text-code bg-codeBg px-2 py-1 text-base rounded">185.199.110.153</code></li>
<li><code class="text-code bg-codeBg px-2 py-1 text-base rounded">185.199.111.153</code></li>
</ul>
</li>
<li>Enter a <code class="text-code bg-codeBg px-2 py-1 text-base rounded">CNAME</code> record with <code class="text-code bg-codeBg px-2 py-1 text-base rounded">www</code> and value <code class="text-code bg-codeBg px-2 py-1 text-base rounded">&lt;username&gt;.github.io</code>.</li>
</ul>
<p>The screenshot below shows the Namecheap DNS config panel for my account.</p>
<img class="mb-1" src="/img/gh-pages-workflow/dns-config.webp" alt="dsaltares.github.io"/>
<p>Finally, go to your dev repo and create a <code class="text-code bg-codeBg px-2 py-1 text-base rounded">static/CNAME</code> file with your domain name. For example, mine contains:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">saltares.com</code></pre></div>
<p>Once that is done and deployed to production, you should see the following in your production repository Settings, inside the Github Pages section. Tick the &quot;Enforce HTTPS&quot; to redirect all traffic from <code class="text-code bg-codeBg px-2 py-1 text-base rounded">http://&lt;domain&gt;</code> to <code class="text-code bg-codeBg px-2 py-1 text-base rounded">https://&lt;domain&gt;</code>.</p>
<img class="mb-1" src="/img/gh-pages-workflow/gh-pages-section.webp" alt="gh-pages-section"/>
<p>Note that this may take up to 24h to work as your new DNS settings propagate, so be patient!</p>
<h3>Done!</h3>
<p>It takes some setup but the result is a pretty convenient workflow, definitely an improvement over the <a class="text-contentLink text-xl" href="/general/migration-from-wordpress-to-hugo/">git hook based setup</a> I had before.</p>
<p>Let me know if you have any issues with this!</p></article></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metadata":{"path":"content/post/2020-01-17-hugo-gh-pages-workflow.mdx","title":"Easily deploy your Hugo site to Github Pages","date":"2020-01-17T00:00:00.000Z","categories":["General"],"series":null,"description":null,"slug":"easily-deploy-your-hugo-site-to-github-pages","readingTime":"4 min read","draft":false,"disableComments":false,"keywords":[],"banner":null},"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    h3: \"h3\",\n    code: \"code\",\n    img: \"img\",\n    div: \"div\",\n    pre: \"pre\",\n    span: \"span\",\n    ul: \"ul\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"I had been using a \", _jsx(_components.a, {\n        href: \"https://www.digitalocean.com/products/droplets/\",\n        children: \"DigitalOcean\"\n      }), \" droplet to host this blog and personal projects for years. But... Do I really need to spend the $6/month? It's just a static \", _jsx(_components.a, {\n        href: \"https://gohugo.io/\",\n        children: \"Hugo\"\n      }), \" site, which \", _jsx(_components.a, {\n        href: \"https://pages.github.com/\",\n        children: \"Github pages\"\n      }), \" can do for free. Game hosting on \", _jsx(_components.a, {\n        href: \"https://david-saltares.itch.io/\",\n        children: \"itch.io\"\n      }), \" is also free, it even gives you a mechanism to embed your web games. Looks like I'd be sorted!\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Here's a simple CD workflow for deploying a Huge site to Github pages.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Setup your production Github pages repo\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Create a Github repo with the name \", _jsx(_components.code, {\n        children: \"\u003cusername\u003e.github.io\"\n      }), \". Make sure it has a \", _jsx(_components.code, {\n        children: \"README.md\"\n      }), \" so that you can start pushing to it. Anything pushed to this repo will be accessible from \", _jsx(_components.code, {\n        children: \"http://\u003cusername\u003e.github.io\"\n      }), \". This will be your production repository. If you have a PRO Github account, you can make the repo private. This means users will be able to access the \", _jsx(_components.code, {\n        children: \"github.io\"\n      }), \" site but not the repo sources.\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/gh-pages-workflow/production-repo.webp\",\n      alt: \"dsaltares.github.io\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Create your dev repository\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Create a new repo to host your dev Hugo site from which we will deploy to the production repo. Name it something like \", _jsx(_components.code, {\n        children: \"\u003cusername\u003e.github.io-dev\"\n      }), \". That's where you will write your Hugo pages in Markdown.\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/gh-pages-workflow/dev-repo.webp\",\n      alt: \"dsaltares.github.io-dev\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Configure the CD pipeline\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Whenever we push to our dev repo, we will build the site and deploy it to the production repo. For that, we will leverage \", _jsx(_components.a, {\n        href: \"https://github.com/features/actions\",\n        children: \"Github Actions\"\n      }), \". For the dev repo to publish to the production repo, we need them to exchange keys.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Generate a public/private key pair.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ssh-keygen -t rsa -b 4096 -C \u0026quot;\u0026lt;email\u0026gt;\u0026quot; -f publish_key -P \u0026quot;\u0026quot;\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Now, go to the production repo Settings, Deploy keys and paste the contents of \", _jsx(_components.code, {\n        children: \"publish_key.pub\"\n      }), \" here.\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/gh-pages-workflow/deploy-keys.webp\",\n      alt: \"deploy_keys\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Go to the dev repo Settings, Secrets and add a new secret called \", _jsx(_components.code, {\n        children: \"ACTIONS_DEPLOY_KEY\"\n      }), \" with the contents of the \", _jsx(_components.code, {\n        children: \"publish_key\"\n      }), \" file.\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/gh-pages-workflow/secrets.webp\",\n      alt: \"secrets\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Create a \", _jsx(_components.code, {\n        children: \".github/workflows/deploy.yml\"\n      }), \" file in your dev repo with the following contents:\"]\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-yaml\",\n        children: _jsxs(_components.code, {\n          className: \"language-yaml\",\n          children: [_jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"name\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" Build and deploy\\n\\n\", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"on\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"push\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"branches\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \"\\n      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"-\"\n          }), \" master\\n\\n\", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"jobs\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"build\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"runs-on\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" ubuntu\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"-\"\n          }), \"latest\\n    \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"steps\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \"\\n      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"-\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"name\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" Checkout\\n        \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"uses\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" actions/checkout@v1\\n      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"-\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"name\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" Setup Hugo\\n        \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"uses\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" peaceiris/actions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"-\"\n          }), \"hugo@v2\\n      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"-\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"name\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" Build\\n        \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"run\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" hugo\\n      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"-\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"name\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" Deploy\\n        \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"uses\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" peaceiris/actions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"-\"\n          }), \"gh\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"-\"\n          }), \"pages@v2\\n        \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"env\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \"\\n          \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"EXTERNAL_REPOSITORY\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \u003cusername\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"\u003e\"\n          }), \"/\u003crepository\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"\u003e\"\n          }), \".github.io\\n          \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"ACTIONS_DEPLOY_KEY\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" $\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \" secrets.ACTIONS_DEPLOY_KEY \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n          \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"PUBLISH_BRANCH\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" master\\n          \", _jsx(_components.span, {\n            className: \"token key atrule\",\n            children: \"PUBLISH_DIR\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" ./public\\n\"]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"After you push this file and every time you push to dev, the \", _jsx(_components.code, {\n        children: \"Build and Deploy\"\n      }), \" action will be triggered. It will checkout the dev repo, install the latest Hugo binary, build your site and deploy to the master branch of your production repo. Once it's done, the latest version of your site will be available on \", _jsx(_components.code, {\n        children: \"https://\u003cusername\u003e.github.io\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/gh-pages-workflow/actions.webp\",\n      alt: \"actions\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Even though my blog contains hundreds of posts, images and files, \", _jsx(_components.code, {\n        children: \"Build and Deploy\"\n      }), \" takes less than 1 minute!\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Make your domain point to your Github Pages\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Obviously, this step only applies if you have your own domain. Go to your provider's admin panel and change your domain's DNS records.\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Enter 4 \", _jsx(_components.code, {\n          children: \"A\"\n        }), \" records with \", _jsx(_components.code, {\n          children: \"@\"\n        }), \" hosts and the Github Pages IPs:\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.code, {\n              children: \"185.199.108.153\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.code, {\n              children: \"185.199.109.153\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.code, {\n              children: \"185.199.110.153\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.code, {\n              children: \"185.199.111.153\"\n            })\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Enter a \", _jsx(_components.code, {\n          children: \"CNAME\"\n        }), \" record with \", _jsx(_components.code, {\n          children: \"www\"\n        }), \" and value \", _jsx(_components.code, {\n          children: \"\u003cusername\u003e.github.io\"\n        }), \".\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The screenshot below shows the Namecheap DNS config panel for my account.\"\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/gh-pages-workflow/dns-config.webp\",\n      alt: \"dsaltares.github.io\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Finally, go to your dev repo and create a \", _jsx(_components.code, {\n        children: \"static/CNAME\"\n      }), \" file with your domain name. For example, mine contains:\"]\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"saltares.com\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Once that is done and deployed to production, you should see the following in your production repository Settings, inside the Github Pages section. Tick the \\\"Enforce HTTPS\\\" to redirect all traffic from \", _jsx(_components.code, {\n        children: \"http://\u003cdomain\u003e\"\n      }), \" to \", _jsx(_components.code, {\n        children: \"https://\u003cdomain\u003e\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/img/gh-pages-workflow/gh-pages-section.webp\",\n      alt: \"gh-pages-section\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Note that this may take up to 24h to work as your new DNS settings propagate, so be patient!\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Done!\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"It takes some setup but the result is a pretty convenient workflow, definitely an improvement over the \", _jsx(_components.a, {\n        href: \"/general/migration-from-wordpress-to-hugo/\",\n        children: \"git hook based setup\"\n      }), \" I had before.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Let me know if you have any issues with this!\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","scope":{}},"series":null},"__N_SSG":true},"page":"/[slug]","query":{"slug":"easily-deploy-your-hugo-site-to-github-pages"},"buildId":"o3N7RC9DYMmzFV4fxvsi1","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>